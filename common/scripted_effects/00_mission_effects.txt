complete_mission_effect = {
	if = {
		limit = {
			NOT = {
				has_variable = num_of_completed_missions
			}
		}
		set_variable = {
			name = num_of_completed_missions
			value = 1
		}
	}
	else_if = {
		limit = {
			has_variable = num_of_completed_missions
		}
		change_variable = {
			name = num_of_completed_missions
			add = 1
		}
	}
	if = {
		limit = { has_variable = ai_mission_backout }
		remove_variable = ai_mission_backout
	}
}

start_mission_ai_effect = {
	if = {
		limit = { has_variable = ai_mission_backout }
		remove_variable = ai_mission_backout
	}
	if = {
		limit = { is_ai = yes }
		set_variable = {
			name = ai_mission_backout
			days = 21900 # 60 years # defines how long after taking a mission the AI will automatically abort it
		}
	}
}

carthaginian_rome_expansion_mission_task_7_effect = {
	if = {
		limit = {
			owner = c:ROM
			controller = c:CAR
		}
		custom_tooltip = "carthaginian_rome_expansion_mission_task_7_effect_2_tt"
		hidden_effect = {
			add_claim = c:ROM
			create_country = {
				save_temporary_scope_as = new_country_scope
				set_variable = {
					name = "carthaginian_released_city_gaul"
					days = 20
				}
				if = {
					limit = {
						any_country = {
							has_variable = carthaginian_released_city_gaul
							NOT = { this = prev }
							NOT = { alliance_with = prev }
						}
					}
					every_country = {
						limit = {
							has_variable = carthaginian_released_city_gaul
							NOT = { this = prev }
							NOT = { alliance_with = prev }
						}
						add_alliance = prev
					}
				}
				PREV = {
					if = {
						limit = {
							any_neighbor_province = {
								NOT = { has_building = fortress_building }
								exists = owner
								owner = { this = c:ROM }
								NOT = { dominant_province_culture = roman }
							}
						}
						ordered_neighbor_province = {
							order_by = total_population
							limit = {
								NOT = { has_building = fortress_building }
								exists = owner
								owner = { this = c:ROM }
								NOT = { dominant_province_culture = roman }
							}
							max = 2
							set_conquered_by = scope:new_country_scope
							add_claim = c:ROM
						}
					}
				}
			}
		}
	}
}

carthaginian_rome_expansion_mission_task_8_effect = {
	if = {
		limit = {
			owner = c:ROM
			controller = c:CAR
		}
		custom_tooltip = "carthaginian_rome_expansion_mission_task_7_effect_2_tt"
		hidden_effect = {
			add_claim = c:ROM
			create_country = {
				save_temporary_scope_as = new_country_scope
				set_variable = {
					name = "carthaginian_released_city_magna_graecia"
					days = 20
				}
				if = {
					limit = {
						any_country = {
							has_variable = carthaginian_released_city_magna_graecia
							NOT = { this = prev }
							NOT = { alliance_with = prev }
						}
					}
					every_country = {
						limit = {
							has_variable = carthaginian_released_city_magna_graecia
							NOT = { this = prev }
							NOT = { alliance_with = prev }
						}
						add_alliance = prev
					}
				}
				PREV = {
					if = {
						limit = {
							any_neighbor_province = {
								NOT = { has_building = fortress_building }
								exists = owner
								owner = { this = c:ROM }
								NOT = { dominant_province_culture = roman }
							}
						}
						ordered_neighbor_province = {
							order_by = total_population
							limit = {
								NOT = { has_building = fortress_building }
								exists = owner
								owner = { this = c:ROM }
								NOT = { dominant_province_culture = roman }
							}
							max = 2
							set_conquered_by = scope:new_country_scope
							add_claim = c:ROM
						}
					}
				}
			}
		}
	}
}

rome_mission_conquest_effect = {
	if = {
		limit = { 
			NOT = { has_variable = rm_marian_reforms_flag }
		}
		if = {
			limit = {
				current_ruler = { popularity < 100 }
			}
			current_ruler = { add_popularity = popularity_small }
		}
	}
	custom_tooltip = roman_conquest_sni_tooltip
}

roman_mission_colonia_reconquest_effect = {
	if = {
		limit = {
			NOR = { 
				has_province_rank = city 
				has_province_rank = city_metropolis
			} 
		}
		custom_tooltip = "time_to_complete_city_tt"
		hidden_effect = {
			add_province_modifier = {
				name = founding_city_in_progress
				duration = 365
			}
		}
		trigger_event = {
			id = state_improvement.6
			days = 365
		}
	}
	if = {
		limit = {
			is_state_capital = no
			scope:colonia_scope = {
				NOR = {
					is_in_area = neapolis_area
					is_in_area = cannae_area 
					is_in_area = roma_area
					this = p:103
				}
			}
		}
		scope:colonia_scope.state = {
			set_state_capital = scope:colonia_scope
		}
	}
	if = {
		limit = { has_variable = roman_colonia_mil_flag }
		add_province_modifier = { name = italian_colonia_military_pmod }
	}
	else_if = {
		limit = { has_variable = roman_colonia_civ_flag }
		add_province_modifier = { name = italian_colonia_civic_pmod }
	}
	else_if = {
		limit = { has_variable = roman_colonia_rel_flag }
		add_province_modifier = { name = italian_colonia_religious_pmod }
	}
	else_if = {
		limit = { has_variable = roman_colonia_tra_flag }
		add_province_modifier = { name = italian_colonia_trade_pmod }
	}
	else = {
		add_province_modifier = { name = italian_colonia_pmod }
	}
}

rm_gallic_exodus_effect = {
	custom_tooltip = rm_gallic_exodus_effect.tt
	hidden_effect = {
		set_variable = {
			name = rm_gallic_exodus_pop_total
			value = 0
		}
		while = {
			limit = {
				p:142.area = {
					any_area_province = {
						owner = c:ROM
						NOT = { has_variable = rm_gallic_exodus_flag }
						province_dominant_culture_group = gallic
					}
				}
			}
			scope:rm_gallic_exodus_country = {
				random_owned_province = {
					limit = {
						NOT = { has_variable = rm_gallic_exodus_flag }
						total_population < population_cap
					}
					weight = {
						modifier = {
							factor = 5
							has_city_status = yes
						}
						modifier = {
							factor = 5
							total_population > 9
						}
					}
					set_variable = {
						name = rm_gallic_exodus_flag
					}
					save_scope_as = rm_gallic_exodus_receiver
				}
			}
			p:142.area = {
				random_area_province = {
					limit = {
						owner = c:ROM
						NOT = { has_variable = rm_gallic_exodus_flag }
						province_dominant_culture_group = gallic
					}
					set_variable = {
						name = rm_gallic_exodus_flag
					}
					save_scope_as = rm_gallic_exodus_sender
				}
			}
			set_variable = {
				name = rm_gallic_exodus_pop_var
				value = {
					scope:rm_gallic_exodus_sender = {
						every_pops_in_province = {
							limit = {
								pop_culture_group = gallic
								NOT = { pop_type = slaves }
							}
							add = 1
							max = {
								value = scope:rm_gallic_exodus_sender.total_population
								divide = 5
							}
							round = yes
						}
					}
				}
			}
			change_variable = {
				name = rm_gallic_exodus_pop_total			
				add = var:rm_gallic_exodus_pop_var
			}
			remove_variable = rm_gallic_exodus_pop_var
			scope:rm_gallic_exodus_sender = {
				ordered_pops_in_province = {
					limit = {
						pop_culture_group = gallic
						NOT = { pop_type = slaves }
					}
					order_by = pop_hapiness
					max = {
						value = total_population
						divide = 5
					}
					check_range_bounds = no
					move_pop = scope:rm_gallic_exodus_receiver
				}
			}
		}
		c:ROM = {
			every_owned_province = {
				limit = { has_variable = rm_gallic_exodus_flag }
				remove_variable = rm_gallic_exodus_flag
			}
		}
		scope:rm_gallic_exodus_country = {
			every_owned_province = {
				limit = { has_variable = rm_gallic_exodus_flag }
				remove_variable = rm_gallic_exodus_flag
			}
			trigger_event = {
			#	id = me_roman_1_roman_italia.29
			}
		}
	}
}

rm_destroy_latins_scope_effect = {
	if = {
		limit = {
			any_subject = {
				count >= 1
				country_culture_group = latin
			}
		}
		ordered_subject = {
			limit = {
				country_culture_group = latin
			}
			order_by = num_of_cohorts
			save_scope_as = latin_subject_1
		}
	}
	if = {
		limit = {
			any_subject = {
				count >= 2
				country_culture_group = latin
			}
		}
		ordered_subject = {
			limit = {
				country_culture_group = latin
				NOT = { this = scope:latin_subject_1 }
			}
			order_by = num_of_cohorts
			save_scope_as = latin_subject_2
		}
	}
	if = {
		limit = {
			any_subject = {
				count >= 3
				country_culture_group = latin
			}
		}
		ordered_subject = {
			limit = {
				country_culture_group = latin
				NOR = { 
					this = scope:latin_subject_1
					this = scope:latin_subject_2
					
				}
			}
			order_by = num_of_cohorts
			save_scope_as = latin_subject_3
		}
	}
	if = {
		limit = {
			any_subject = {
				count >= 4
				country_culture_group = latin
			}
		}
		ordered_subject = {
			limit = {
				country_culture_group = latin
				NOR = { 
					this = scope:latin_subject_1
					this = scope:latin_subject_2
					this = scope:latin_subject_3
					
				}
			}
			order_by = num_of_cohorts
			save_scope_as = latin_subject_4
		}
	}
	if = {
		limit = {
			any_subject = {
				count >= 5
				country_culture_group = latin
			}
		}
		ordered_subject = {
			limit = {
				country_culture_group = latin
				NOR = { 
					this = scope:latin_subject_1
					this = scope:latin_subject_2
					this = scope:latin_subject_3
					this = scope:latin_subject_4
					
				}
			}
			order_by = num_of_cohorts
			save_scope_as = latin_subject_5
		}
	}
	if = {
		limit = {
			any_subject = {
				count >= 6
				country_culture_group = latin
			}
		}
		ordered_subject = {
			limit = {
				country_culture_group = latin
				NOR = { 
					this = scope:latin_subject_1
					this = scope:latin_subject_2
					this = scope:latin_subject_3
					this = scope:latin_subject_4
					this = scope:latin_subject_5
					
				}
			}
			order_by = num_of_cohorts
			save_scope_as = latin_subject_6
		}
	}
	if = {
		limit = {
			any_subject = {
				count >= 7
				country_culture_group = latin
			}
		}
		ordered_subject = {
			limit = {
				country_culture_group = latin
				NOR = { 
					this = scope:latin_subject_1
					this = scope:latin_subject_2
					this = scope:latin_subject_3
					this = scope:latin_subject_4
					this = scope:latin_subject_5
					this = scope:latin_subject_6
					
				}
			}
			order_by = num_of_cohorts
			save_scope_as = latin_subject_7
		}
	}
	if = {
		limit = {
			any_subject = {
				count >= 8
				country_culture_group = latin
			}
		}
		ordered_subject = {
			limit = {
				country_culture_group = latin
				NOR = { 
					this = scope:latin_subject_1
					this = scope:latin_subject_2
					this = scope:latin_subject_3
					this = scope:latin_subject_4
					this = scope:latin_subject_5
					this = scope:latin_subject_6
					this = scope:latin_subject_7
				}
			}
			order_by = num_of_cohorts
			save_scope_as = latin_subject_8
		}
	}
	if = {
		limit = {
			any_subject = {
				count >= 9
				country_culture_group = latin
			}
		}
		ordered_subject = {
			limit = {
				country_culture_group = latin
				NOR = { 
					this = scope:latin_subject_1
					this = scope:latin_subject_2
					this = scope:latin_subject_3
					this = scope:latin_subject_4
					this = scope:latin_subject_5
					this = scope:latin_subject_6
					this = scope:latin_subject_7
					this = scope:latin_subject_8
					
				}
			}
			order_by = num_of_cohorts
			save_scope_as = latin_subject_9
		}
	}
}

rm_destroy_latins_release_alliance_effect = {
	c:ROM = { release_subject = scope:latin_subject_1 }
	scope:latin_subject_1.capital_scope = {
		add_claim = c:ROM
	}
	if = {
		limit = { exists = scope:latin_subject_2 }
		c:ROM = { release_subject = scope:latin_subject_2 }
		scope:latin_subject_2 = { add_alliance = scope:latin_subject_1 }
		scope:latin_subject_2.capital_scope = {
			add_claim = c:ROM
		}
	}
	if = {
		limit = { exists = scope:latin_subject_3 }
		c:ROM = { release_subject = scope:latin_subject_3 }
		scope:latin_subject_3 = { add_alliance = scope:latin_subject_1 }
		scope:latin_subject_3.capital_scope = {
			add_claim = c:ROM
		}
	}
	if = {
		limit = { exists = scope:latin_subject_4 }
		c:ROM = { release_subject = scope:latin_subject_4 }
		scope:latin_subject_4 = { add_alliance = scope:latin_subject_1 }
		scope:latin_subject_4.capital_scope = {
			add_claim = c:ROM
		}
	}
	if = {
		limit = { exists = scope:latin_subject_5 }
		c:ROM = { release_subject = scope:latin_subject_5 }
		scope:latin_subject_5 = { add_alliance = scope:latin_subject_1 }
		scope:latin_subject_5.capital_scope = {
			add_claim = c:ROM
		}
	}
	if = {
		limit = { exists = scope:latin_subject_6 }
		c:ROM = { release_subject = scope:latin_subject_6 }
		scope:latin_subject_6 = { add_alliance = scope:latin_subject_1 }
		scope:latin_subject_6.capital_scope = {
			add_claim = c:ROM
		}
	}
	if = {
		limit = { exists = scope:latin_subject_7 }
		c:ROM = { release_subject = scope:latin_subject_7 }
		scope:latin_subject_7 = { add_alliance = scope:latin_subject_1 }
		scope:latin_subject_7.capital_scope = {
			add_claim = c:ROM
		}
	}
	if = {
		limit = { exists = scope:latin_subject_8 }
		c:ROM = { release_subject = scope:latin_subject_8 }
		scope:latin_subject_8 = { add_alliance = scope:latin_subject_1 }
		scope:latin_subject_8.capital_scope = {
			add_claim = c:ROM
		}
	}
	if = {
		limit = { exists = scope:latin_subject_9 }
		c:ROM = { release_subject = scope:latin_subject_9 }
		scope:latin_subject_9 = { add_alliance = scope:latin_subject_1 }
		scope:latin_subject_9.capital_scope = {
			add_claim = c:ROM
		}
	}
}

rm_expelling_punics_large_effect = {
	custom_tooltip = rm_expelling_punics_large_effect_tt
	hidden_effect = {
		set_variable = {
			name = rm_punic_exodus_pop_total
			value = 0
		}
		if = {
			limit = { has_variable = rm_2_exodus_1 }
			while = {
				limit = {
					p:94.area = {
						any_area_province = {
							owner = c:ROM
							NOT = { has_variable = rm_punic_exodus_flag }
							OR = {
								dominant_province_culture = carthaginian
								dominant_province_culture = phoenician
							}
						}
					}
				}
				scope:rm_punic_exodus_country = {
					random_owned_province = {
						weight = {
							modifier = {
								factor = 5
								total_population < population_cap
							}
							modifier = {
								factor = 5
								has_city_status = yes
							}
							modifier = {
								factor = 5
								total_population > 9
							}
							modifier = {
								factor = -100
								NOT = { has_variable = rm_punic_exodus_flag }
							}
						}
						set_variable = {
							name = rm_punic_exodus_flag
						}
						save_scope_as = rm_punic_exodus_receiver
					}
				}
				p:94.area = {
					random_area_province = {
						limit = {
							owner = c:ROM
							NOT = { has_variable = rm_punic_exodus_flag }
							OR = {
								dominant_province_culture = carthaginian
								dominant_province_culture = phoenician
							}
						}
						set_variable = {
							name = rm_punic_exodus_flag
						}
						save_scope_as = rm_punic_exodus_sender
					}
				}
				set_variable = {
					name = rm_punic_exodus_pop_var
					value = {
						scope:rm_punic_exodus_sender = {
							every_pops_in_province = {
								limit = {
									pop_culture_group = west_levantine
									NOR = { 
										pop_culture = hebrew
										pop_type = slaves
									}
								}
								add = 1
								max = {
									value = scope:rm_punic_exodus_sender.total_population
									divide = 2
								}
								round = yes
							}
						}
					}
				}
				change_variable = {
					name = rm_punic_exodus_pop_total			
					add = var:rm_punic_exodus_pop_var
				}
				remove_variable = rm_punic_exodus_pop_var
				scope:rm_punic_exodus_sender = {
					ordered_pops_in_province = {
						limit = {
							pop_culture_group = west_levantine
							NOR = { 
								pop_culture = hebrew
								pop_type = slaves
							}
						}
						order_by = pop_hapiness
						max = {
							value = scope:rm_punic_exodus_sender.total_population
							divide = 2
						}
						check_range_bounds = no
						move_pop = scope:rm_punic_exodus_receiver
					}
				}
			}
		}
		else_if = {
			limit = { has_variable = rm_2_exodus_2 }
			while = {
				limit = {
					p:3481.area = {
						any_area_province = {
							owner = c:ROM
							NOT = { has_variable = rm_punic_exodus_flag }
							OR = {
								dominant_province_culture = carthaginian
								dominant_province_culture = phoenician
							}
						}
					}
				}
				scope:rm_punic_exodus_country = {
					random_owned_province = {
						weight = {
							modifier = {
								factor = 5
								total_population < population_cap
							}
							modifier = {
								factor = 5
								has_city_status = yes
							}
							modifier = {
								factor = 5
								total_population > 9
							}
							modifier = {
								factor = -100
								NOT = { has_variable = rm_punic_exodus_flag }
							}
						}
						if = { 
							limit = {
								NOT = { has_variable = rm_punic_exodus_flag }
							}
							set_variable = {
								name = rm_punic_exodus_flag
							}
						}
						save_scope_as = rm_punic_exodus_receiver
					}
				}
				p:3481.area = {
					random_area_province = {
						limit = {
							owner = c:ROM
							NOT = { has_variable = rm_punic_exodus_flag }
							OR = {
								dominant_province_culture = carthaginian
								dominant_province_culture = phoenician
							}
						}
						set_variable = {
							name = rm_punic_exodus_flag
						}
						save_scope_as = rm_punic_exodus_sender
					}
				}
				set_variable = {
					name = rm_punic_exodus_pop_var
					value = {
						scope:rm_punic_exodus_sender = {
							every_pops_in_province = {
								limit = {
									pop_culture_group = west_levantine
									NOR = { 
										pop_culture = hebrew
										pop_type = slaves
									}
								}
								add = 1
								max = {
									value = scope:rm_punic_exodus_sender.total_population
									divide = 2
								}
								round = yes
							}
						}
					}
				}
				change_variable = {
					name = rm_punic_exodus_pop_total			
					add = var:rm_punic_exodus_pop_var
				}
				remove_variable = rm_punic_exodus_pop_var
				scope:rm_punic_exodus_sender = {
					ordered_pops_in_province = {
						limit = {
							pop_culture_group = west_levantine
							NOR = { 
								pop_culture = hebrew
								pop_type = slaves
							}
						}
						order_by = pop_hapiness
						max = {
							value = scope:rm_punic_exodus_sender.total_population
							divide = 2
						}
						move_pop = scope:rm_punic_exodus_receiver
					}
				}
			}
			while = {
				limit = {
					p:3504.area = {
						any_area_province = {
							owner = c:ROM
							NOT = { has_variable = rm_punic_exodus_flag }
							OR = {
								dominant_province_culture = carthaginian
								dominant_province_culture = phoenician
							}
						}
					}
				}
				scope:rm_punic_exodus_country = {
					random_owned_province = {
						weight = {
							modifier = {
								factor = 5
								total_population < population_cap
							}
							modifier = {
								factor = 5
								has_city_status = yes
							}
							modifier = {
								factor = 5
								total_population > 9
							}
							modifier = {
								factor = -100
								NOT = { has_variable = rm_punic_exodus_flag }
							}
						}
						if = { 
							limit = {
								NOT = { has_variable = rm_punic_exodus_flag }
							}
							set_variable = {
								name = rm_punic_exodus_flag
							}
						}
						save_scope_as = rm_punic_exodus_receiver
					}
				}
				p:3504.area = {
					random_area_province = {
						limit = {
							owner = c:ROM
							NOT = { has_variable = rm_punic_exodus_flag }
							OR = {
								dominant_province_culture = carthaginian
								dominant_province_culture = phoenician
							}
						}
						set_variable = {
							name = rm_punic_exodus_flag
						}
						save_scope_as = rm_punic_exodus_sender
					}
				}
				set_variable = {
					name = rm_punic_exodus_pop_var
					value = {
						scope:rm_punic_exodus_sender = {
							every_pops_in_province = {
								limit = {
									pop_culture_group = west_levantine
									NOR = { 
										pop_culture = hebrew
										pop_type = slaves
									}
								}
								add = 1
								max = {
									value = scope:rm_punic_exodus_sender.total_population
									divide = 2
								}
								round = yes
							}
						}
					}
				}
				change_variable = {
					name = rm_punic_exodus_pop_total			
					add = var:rm_punic_exodus_pop_var
				}
				remove_variable = rm_punic_exodus_pop_var
				scope:rm_punic_exodus_sender = {
					ordered_pops_in_province = {
						limit = {
							pop_culture_group = west_levantine
							NOR = { 
								pop_culture = hebrew
								pop_type = slaves
							}
						}
						order_by = pop_hapiness
						max = {
							value = scope:rm_punic_exodus_sender.total_population
							divide = 2
						}
						check_range_bounds = no
						move_pop = scope:rm_punic_exodus_receiver
					}
				}
			}
		}
		c:ROM = {
			every_owned_province = {
				limit = { has_variable = rm_punic_exodus_flag }
				remove_variable = rm_punic_exodus_flag
			}
		}
		scope:rm_punic_exodus_country = {
			every_owned_province = {
				limit = { has_variable = rm_punic_exodus_flag }
				remove_variable = rm_punic_exodus_flag
			}
		}
	}
}

rm_expelling_punics_small_effect = {
	custom_tooltip = rm_expelling_punics_small_effect_tt
	hidden_effect = {
		set_variable = {
			name = rm_punic_exodus_pop_total
			value = 0
		}
		if = {
			limit = { has_variable = rm_2_exodus_1 }
			while = {
				limit = {
					p:94.area = {
						any_area_province = {
							owner = c:ROM
							NOT = { has_variable = rm_punic_exodus_flag }
							OR = {
								dominant_province_culture = carthaginian
								dominant_province_culture = phoenician
							}
						}
					}
				}
				scope:rm_punic_exodus_country = {
					random_owned_province = {
						weight = {
							modifier = {
								factor = 5
								total_population < population_cap
							}
							modifier = {
								factor = 5
								has_city_status = yes
							}
							modifier = {
								factor = 5
								total_population > 9
							}
							modifier = {
								factor = -100
								NOT = { has_variable = rm_punic_exodus_flag }
							}
						}
						set_variable = {
							name = rm_punic_exodus_flag
						}
						save_scope_as = rm_punic_exodus_receiver
					}
				}
				p:94.area = {
					random_area_province = {
						limit = {
							owner = c:ROM
							NOT = { has_variable = rm_punic_exodus_flag }
							OR = {
								dominant_province_culture = carthaginian
								dominant_province_culture = phoenician
							}
						}
						set_variable = {
							name = rm_punic_exodus_flag
						}
						save_scope_as = rm_punic_exodus_sender
					}
				}
				set_variable = {
					name = rm_punic_exodus_pop_var
					value = {
						scope:rm_punic_exodus_sender = {
							every_pops_in_province = {
								limit = {
									pop_culture_group = west_levantine
									NOR = { 
										pop_culture = hebrew
										pop_type = slaves
									}
								}
								add = 1
								max = {
									value = scope:rm_punic_exodus_sender.total_population
									divide = 5
								}
								round = yes
							}
						}
					}
				}
				change_variable = {
					name = rm_punic_exodus_pop_total			
					add = var:rm_punic_exodus_pop_var
				}
				remove_variable = rm_punic_exodus_pop_var
				scope:rm_punic_exodus_sender = {
					ordered_pops_in_province = {
						limit = {
							pop_culture_group = west_levantine
							NOR = { 
								pop_culture = hebrew
								pop_type = slaves
							}
						}
						order_by = pop_hapiness
						max = {
							value = scope:rm_punic_exodus_sender.total_population
							divide = 5
						}
						check_range_bounds = no
						move_pop = scope:rm_punic_exodus_receiver
					}
				}
			}
		}
		else_if = {
			limit = { has_variable = rm_2_exodus_2 }
			while = {
				limit = {
					p:3481.area = {
						any_area_province = {
							owner = c:ROM
							NOT = { has_variable = rm_punic_exodus_flag }
							OR = {
								dominant_province_culture = carthaginian
								dominant_province_culture = phoenician
							}
						}
					}
				}
				scope:rm_punic_exodus_country = {
					random_owned_province = {
						weight = {
							modifier = {
								factor = 5
								total_population < population_cap
							}
							modifier = {
								factor = 5
								has_city_status = yes
							}
							modifier = {
								factor = 5
								total_population > 9
							}
							modifier = {
								factor = -100
								NOT = { has_variable = rm_punic_exodus_flag }
							}
						}
						if = { 
							limit = {
								NOT = { has_variable = rm_punic_exodus_flag }
							}
							set_variable = {
								name = rm_punic_exodus_flag
							}
						}
						save_scope_as = rm_punic_exodus_receiver
					}
				}
				p:3481.area = {
					random_area_province = {
						limit = {
							owner = c:ROM
							NOT = { has_variable = rm_punic_exodus_flag }
							OR = {
								dominant_province_culture = carthaginian
								dominant_province_culture = phoenician
							}
						}
						set_variable = {
							name = rm_punic_exodus_flag
						}
						save_scope_as = rm_punic_exodus_sender
					}
				}
				set_variable = {
					name = rm_punic_exodus_pop_var
					value = {
						scope:rm_punic_exodus_sender = {
							every_pops_in_province = {
								limit = {
									pop_culture_group = west_levantine
									NOR = { 
										pop_culture = hebrew
										pop_type = slaves
									}
								}
								add = 1
								max = {
									value = scope:rm_punic_exodus_sender.total_population
									divide = 5
								}
								round = yes
							}
						}
					}
				}
				change_variable = {
					name = rm_punic_exodus_pop_total			
					add = var:rm_punic_exodus_pop_var
				}
				remove_variable = rm_punic_exodus_pop_var
				scope:rm_punic_exodus_sender = {
					ordered_pops_in_province = {
						limit = {
							pop_culture_group = west_levantine
							NOR = { 
								pop_culture = hebrew
								pop_type = slaves
							}
						}
						order_by = pop_hapiness
						max = {
							value = scope:rm_punic_exodus_sender.total_population
							divide = 5
						}
						check_range_bounds = no
						move_pop = scope:rm_punic_exodus_receiver
					}
				}
			}
			while = {
				limit = {
					p:3504.area = {
						any_area_province = {
							owner = c:ROM
							NOT = { has_variable = rm_punic_exodus_flag }
							OR = {
								dominant_province_culture = carthaginian
								dominant_province_culture = phoenician
							}
						}
					}
				}
				scope:rm_punic_exodus_country = {
					random_owned_province = {
						limit = {
							total_population < population_cap
						}
						weight = {
							modifier = {
								factor = 5
								has_city_status = yes
							}
							modifier = {
								factor = 5
								total_population > 9
							}
							modifier = {
								factor = -100
								NOT = { has_variable = rm_punic_exodus_flag }
							}
						}
						if = { 
							limit = {
								NOT = { has_variable = rm_punic_exodus_flag }
							}
							set_variable = {
								name = rm_punic_exodus_flag
							}
						}
						save_scope_as = rm_punic_exodus_receiver
					}
				}
				p:3504.area = {
					random_area_province = {
						limit = {
							owner = c:ROM
							NOT = { has_variable = rm_punic_exodus_flag }
							OR = {
								dominant_province_culture = carthaginian
								dominant_province_culture = phoenician
							}
						}
						set_variable = {
							name = rm_punic_exodus_flag
						}
						save_scope_as = rm_punic_exodus_sender
					}
				}
				set_variable = {
					name = rm_punic_exodus_pop_var
					value = {
						scope:rm_punic_exodus_sender = {
							every_pops_in_province = {
								limit = {
									pop_culture_group = west_levantine
									NOR = { 
										pop_culture = hebrew
										pop_type = slaves
									}
								}
								add = 1
								max = {
									value = scope:rm_punic_exodus_sender.total_population
									divide = 5
								}
								round = yes
							}
						}
					}
				}
				change_variable = {
					name = rm_punic_exodus_pop_total			
					add = var:rm_punic_exodus_pop_var
				}
				remove_variable = rm_punic_exodus_pop_var
				scope:rm_punic_exodus_sender = {
					ordered_pops_in_province = {
						limit = {
							pop_culture_group = west_levantine
							NOR = { 
								pop_culture = hebrew
								pop_type = slaves
							}
						}
						order_by = pop_hapiness
						max = {
							value = scope:rm_punic_exodus_sender.total_population
							divide = 5
						}
						check_range_bounds = no
						move_pop = scope:rm_punic_exodus_receiver
					}
				}
			}
		}
		c:ROM = {
			every_owned_province = {
				limit = { has_variable = rm_punic_exodus_flag }
				remove_variable = rm_punic_exodus_flag
			}
		}
		scope:rm_punic_exodus_country = {
			every_owned_province = {
				limit = { has_variable = rm_punic_exodus_flag }
				remove_variable = rm_punic_exodus_flag
			}
		}
	}
}

rm_notable_person_effect = {
	random_character = {
		limit = {
			is_ruler = no
			is_co_ruler = no
			prisoner = no
			is_adult = yes
			is_at_location = root.capital_scope
			NOT = { has_character_modifier = foreign_citizen }
			trigger_if = {
				limit = {
					employer = { gender_equality = no }
				}
				is_female = no
			}
		}
		weight = {
			modifier = {
				factor = 0
				NOT = { has_culture = roman }
			}
			modifier = {
				factor = 0
				has_variable = expansion_encourager_cooldown
			}
			modifier = {
				factor = 2
				is_admiral = yes
			}
			modifier = {
				factor = 2
				is_general = yes
			}
			modifier = {
				factor = 2
				has_any_office = yes
			}
			modifier = {
				factor = 2
				power_base >= 10
			}
			modifier = {
				factor = 2
				wealth > 500
			}
			modifier = {
				factor = 2
				age >= 30
			}
			modifier = {
				factor = 0
				is_minor_character = no
			}
		}
		save_scope_as = expansion_encourager
	}
}

rm_strongpoint_effect = {
	if = {
		limit = { free_building_slots > 0 }
		add_building_level = fortress_building
	}
	add_province_modifier = { 
		name = rm_3_fortified_pmod 
		duration = 18250 # 50 years
	}
}

rm_small_land_grants_effect = {
	c:ROM = {
		set_variable = {
			name = rm_land_grants_counter_var
			value = 0
		}
	}
	while = {
		count = 6
		c:ROM = {
			random_owned_province = {
				limit = {
					total_population > 1
					dominant_province_culture = roman
					any_pops_in_province = {
						pop_type = freemen
						pop_culture = roman
					}
				}
				weight = {
					modifier = {
						factor = 100
						total_population >= 10
					}
					modifier = {
						factor = 50
						has_city_status = yes
					}
					modifier = {
						factor = -150
						NOT = { has_variable = rm_land_grants_cooldown }
					}
				}
				set_variable = {
					name = rm_land_grants_cooldown
					days = 180
				}
				save_scope_as = rm_land_grants_source_scope
			}
			ordered_owned_province = {
				limit = {
					is_in_area = ariminum_area
					province_dominant_culture_group = gallic
				}
				order_by = {
					value = 0 
					subtract = total_population
				}
				save_scope_as = rm_land_grants_target_scope
			}
		}
		scope:rm_land_grants_source_scope = {
			random_pops_in_province = {
				limit = {
					pop_type = freemen
					pop_culture = roman
				}
				move_pop = scope:rm_land_grants_target_scope
			}
		}
		c:ROM = { 
			change_variable = {
				name = rm_land_grants_counter_var
				add = 1
			}
		}
	}
}

rm_big_land_grants_effect = {
	c:ROM = {
		set_variable = {
			name = rm_land_grants_counter_var
			value = 0
		}
	}
	while = {
		count = 12
		c:ROM = {
			random_owned_province = {
				limit = {
					dominant_province_culture = roman
					any_pops_in_province = {
						pop_type = freemen
						pop_culture = roman
					}
				}
				save_scope_as = rm_land_grants_source_scope
			}
			random_owned_province = {
				limit = {
					is_in_area = ariminum_area
					province_dominant_culture_group = gallic
				}
				save_scope_as = rm_land_grants_target_scope
			}
		}
		scope:rm_land_grants_source_scope = {
			random_pops_in_province = {
				limit = {
					pop_type = freemen
					pop_culture = roman
				}
				move_pop = scope:rm_land_grants_target_scope
			}
		}
		c:ROM = { 
			change_variable = {
				name = rm_land_grants_counter_var
				add = 1
			}
		}
	}
}

rm_settler_effect = {
	c:ROM = {
		set_variable = {
			name = rm_land_grants_counter_var
			value = 0
		}
	}
	while = {
		count = 30
		c:ROM = {
			random_owned_province = {
				limit = {
					NOT = { is_in_region = cisalpine_gaul_region }
					dominant_province_culture = roman
					any_pops_in_province = {
						pop_type = freemen
						pop_culture = roman
					}
				}
				save_scope_as = rm_land_grants_source_scope
			}
			random_owned_province = {
				limit = {
					is_in_region = cisalpine_gaul_region
					province_dominant_culture_group = gallic
				}
				save_scope_as = rm_land_grants_target_scope
			}
		}
		scope:rm_land_grants_source_scope = {
			random_pops_in_province = {
				limit = {
					pop_type = freemen
					pop_culture = roman
				}
				move_pop = scope:rm_land_grants_target_scope
			}
		}
		c:ROM = {
			change_variable = {
				name = rm_land_grants_counter_var
				add = 1
			}
		}
	}
}

rm_triumphal_arch_effect = {
	if = {
		limit = {
			NOR = {
				has_province_modifier = rm_triumphal_arch_1
				has_province_modifier = rm_triumphal_arch_2
				has_province_modifier = rm_triumphal_arch_3
				has_province_modifier = rm_triumphal_arch_4
				has_province_modifier = rm_triumphal_arch_5
				has_province_modifier = rm_triumphal_arch_6
			}
		}
		add_province_modifier = { name = rm_triumphal_arch_1 }
	}
	else_if = {
		limit = { has_province_modifier = rm_triumphal_arch_1 }
		hidden_effect = { remove_province_modifier = rm_triumphal_arch_1 }
		add_province_modifier = { name = rm_triumphal_arch_2 }
	}
	else_if = {
		limit = { has_province_modifier = rm_triumphal_arch_2 }
		hidden_effect = { remove_province_modifier = rm_triumphal_arch_2 }
		add_province_modifier = { name = rm_triumphal_arch_3 }
	}
	else_if = {
		limit = { has_province_modifier = rm_triumphal_arch_3 }
		hidden_effect = { remove_province_modifier = rm_triumphal_arch_3 }
		add_province_modifier = { name = rm_triumphal_arch_4 }
	}
	else_if = {
		limit = { has_province_modifier = rm_triumphal_arch_4 }
		hidden_effect = { remove_province_modifier = rm_triumphal_arch_4 }
		add_province_modifier = { name = rm_triumphal_arch_5 }
	}
	else_if = {
		limit = { has_province_modifier = rm_triumphal_arch_5 }
		hidden_effect = { remove_province_modifier = rm_triumphal_arch_5 }
		add_province_modifier = { name = rm_triumphal_arch_6 }
	}
}

roman_mission_ruler_popularity_effect = {
	current_ruler = {
		if = {
			limit = {
				popularity < 100
			}
			add_popularity = popularity_small
		}
	}
}

roman_mission_greek_clients_effect = {
	add_political_influence = -25
	custom_tooltip = me_roman_greek_client_state_tt
	scope:current_province.state = {
		add_state_modifier = {
			name = roman_mission_greek_clients_modifier
			duration = 7300
		}
	}
}

rm_fortify_effect = {
	if = {
		limit = {
			free_building_slots > 0
		}
		add_building_level = fortress_building
	}
	else = {
		destroy_building_effect = yes
		add_building_level = fortress_building
	}
	if = {
		limit = {
			NOT = { has_province_modifier = rm_3_fortified_pmod }
		}
		add_province_modifier = {
			name = rm_3_fortified_pmod
			duration = 18250 # 50 years
		}
	}
}

generic_conquest_modifier_cleanup_effect = {
	if = {
		limit = { has_country_modifier = generic_peaceful_1 }
		remove_country_modifier = generic_peaceful_1
	}
	else_if = {
		limit = { has_country_modifier = generic_peaceful_2 }
		remove_country_modifier = generic_peaceful_2
	}
	else_if = {
		limit = { has_country_modifier = generic_peaceful_3 }
		remove_country_modifier = generic_peaceful_3
	}
	else_if = {
		limit = { has_country_modifier = generic_warlike_1 }
		remove_country_modifier = generic_warlike_1
	}
	else_if = {
		limit = { has_country_modifier = generic_warlike_2 }
		remove_country_modifier = generic_warlike_2
	}
	else_if = {
		limit = { has_country_modifier = generic_warlike_3 }
		remove_country_modifier = generic_warlike_3
	}
}

spartan_mission_01_variable_cleanup_effect = {
	if = {
		limit = {
			has_variable = spartan_mission_01_laconia_messenia_owned
		}
		remove_variable = spartan_mission_01_laconia_messenia_owned
	}
	if = {
		limit = {
			has_variable = spartan_mission_01_laconia_messenia_unowned
		}
		remove_variable = spartan_mission_01_laconia_messenia_unowned
	}
	if = {
		limit = {
			has_variable = spartan_mission_01_lepreon_unowned
		}
		remove_variable = spartan_mission_01_lepreon_unowned
	}
	if = {
		limit = {
			has_variable = spartan_helot_treatment_good
		}
		remove_variable = spartan_helot_treatment_good
	}
	if = {
		limit = {
			has_variable = spartan_helot_treatment_bad
		}
		remove_variable = spartan_helot_treatment_bad
	}
	if = {
		limit = {
			has_variable = spartan_mission_01_recruitable_skiritai
		}
		remove_variable = spartan_mission_01_recruitable_skiritai
	}
}

sparta_mission_03_variable_cleanup_effect = {
	if = {
		limit = {
			has_variable = enable_protector_of_greece
		}
		remove_variable = enable_protector_of_greece
	}
	if = {
		limit = {
			has_country_modifier = sparta_mission_peloponnesian_league_cities_modifier
		}
		remove_country_modifier = sparta_mission_peloponnesian_league_cities_modifier
	}
}

spartan_mission_02_variable_cleanup_effect = {
	if = {
		limit = {
			has_variable = olympia_unowned
		}
		remove_variable = olympia_unowned
	}
	if = {
		limit = {
			has_variable = argos_unowned
		}
		remove_variable = argos_unowned
	}
	if = {
		limit = {
			has_variable = arcadia_unowned
		}
		remove_variable = arcadia_unowned
	}
	if = {
		limit = {
			has_variable = achaea_unowned
		}
		remove_variable = achaea_unowned
	}
	if = {
		limit = {
			has_variable = sparta_mission_02_corinth_expandable
		}
		remove_variable = sparta_mission_02_corinth_expandable
	}
}

seleukid_mission_02_variable_cleanup_effect = {
	if = {
		limit = {
			has_variable = seleukid_mission_02_owns_syria_start
		}
		remove_variable = seleukid_mission_02_owns_syria_start
	}
	if = {
		limit = {
			has_variable = seleukid_mission_02_owns_syria_cyrrestice_start
		}
		remove_variable = seleukid_mission_02_owns_syria_cyrrestice_start
	}
}

seleukid_mission_03_variable_cleanup_effect = {
	if = {
		limit = {
			has_variable = cappadocia_missing
		}
		remove_variable = cappadocia_missing
	}
	if = {
		limit = {
			has_variable = seleukid_mission_03_anatolia_seleukid_family
		}
		remove_variable = seleukid_mission_03_anatolia_seleukid_family
	}
}

syracuse_foreign_backer_effect = {
	hidden_effect = {
		if = {
			limit = { exists = scope:me_syr_3_corinth }
			scope:me_syr_3_corinth = { save_scope_as = me_syracuse_picked_country_1 }
		}
		while = {
			count = 3
			if = {
				limit = {
					any_country = {
						country_culture_group = hellenic
						capital_scope = { is_in_region = greece_region }
						is_republic = yes
						is_subject = no
						opinion = { target = c:SYR value < 50 }
						any_character = {
							prisoner = no
							is_adult = yes
							is_ruler = no
							has_culture_group = hellenic
							martial > 5
							NOR = {
								has_character_modifier = foreign_citizen
								has_any_illness_trigger = yes
							}
							trigger_if = {
								limit = {
									employer = { gender_equality = no }
								}
								is_female = no
							}
						}
						NOR = { 
							tag = COT
							AND = {
								capital_scope = p:418
								primary_culture = achaean
								is_republic = yes
							}
							tag = SYR
							alliance_with = c:SYR
							is_subject_of = c:SYR
							has_variable = me_syr_foreign_help_refused
							AND = {
								exists = scope:me_syracuse_picked_country_1
								this = scope:me_syracuse_picked_country_1
							}
							AND = {
								exists = scope:me_syracuse_picked_country_2
								this = scope:me_syracuse_picked_country_2
							}
							AND = {
								exists = scope:me_syracuse_picked_country_3
								this = scope:me_syracuse_picked_country_3
							}
						}
					}
				}
				ordered_country = {
					limit = {
						country_culture_group = hellenic
						capital_scope = { is_in_region = greece_region }
						is_republic = yes
						is_subject = no
						opinion = { target = c:SYR value < 50 }
						any_character = {
							prisoner = no
							is_adult = yes
							is_ruler = no
							has_culture_group = hellenic
							martial > 5
							NOR = {
								has_character_modifier = foreign_citizen
								has_any_illness_trigger = yes
							}
							trigger_if = {
								limit = {
									employer = { gender_equality = no }
								}
								is_female = no
							}
						}
						NOR = { 
							tag = SYR
							alliance_with = c:SYR
							is_subject_of = c:SYR
							has_variable = me_syr_foreign_help_refused
							AND = {
								exists = scope:me_syracuse_picked_country_1
								this = scope:me_syracuse_picked_country_1
							}
							AND = {
								exists = scope:me_syracuse_picked_country_2
								this = scope:me_syracuse_picked_country_2
							}
							AND = {
								exists = scope:me_syracuse_picked_country_3
								this = scope:me_syracuse_picked_country_3
							}
						}
					}
					order_by = num_of_cities
					if = {
						limit = { 
							NOT = { exists = scope:me_syracuse_picked_country_1 }
						}
						save_scope_as = me_syracuse_picked_country_1
					}
					else_if = {
						limit = { 
							exists = scope:me_syracuse_picked_country_1
							NOT = { exists = scope:me_syracuse_picked_country_2 }
						}
						save_scope_as = me_syracuse_picked_country_2
					}
					else_if = {
						limit = { 
							exists = scope:me_syracuse_picked_country_1
							exists = scope:me_syracuse_picked_country_2
							NOT = { exists = scope:me_syracuse_picked_country_3 }
						}
						save_scope_as = me_syracuse_picked_country_3
					}
				}
			}
		}
	}
}

syracuse_foreign_backer_character_effect = {
	hidden_effect = {
		while = {
			count = 3
			if = {
				limit = {
					any_character = {
						prisoner = no
						is_adult = yes
						is_ruler = no
						has_culture_group = hellenic
						martial > 5
						NOR = {
							has_character_modifier = foreign_citizen
						}
						trigger_if = {
							limit = {
								employer = { gender_equality = no }
							}
							is_female = no
						}
						NOR = { 
							AND = {
								exists = scope:me_syracuse_picked_character_1
								this = scope:me_syracuse_picked_character_1
							}
							AND = {
								exists = scope:me_syracuse_picked_character_2
								this = scope:me_syracuse_picked_character_2
							}
							AND = {
								exists = scope:me_syracuse_picked_character_3
								this = scope:me_syracuse_picked_character_3
							}
						}
					}
				}
				ordered_character = {
					limit = {
						prisoner = no
						is_adult = yes
						is_ruler = no
						has_culture_group = hellenic
						martial > 5
						NOR = {
							has_character_modifier = foreign_citizen
						}
						trigger_if = {
							limit = {
								employer = { gender_equality = no }
							}
							is_female = no
						}
						NOR = { 
							AND = {
								exists = scope:me_syracuse_picked_character_1
								this = scope:me_syracuse_picked_character_1
							}
							AND = {
								exists = scope:me_syracuse_picked_character_2
								this = scope:me_syracuse_picked_character_2
							}
							AND = {
								exists = scope:me_syracuse_picked_character_3
								this = scope:me_syracuse_picked_character_3
							}
						}
					}
					order_by = martial
					if = {
						limit = { 
							NOT = { exists = scope:me_syracuse_picked_character_1 }
						}
						save_scope_as = me_syracuse_picked_character_1
					}
					else_if = {
						limit = { 
							exists = scope:me_syracuse_picked_character_1
							NOT = { exists = scope:me_syracuse_picked_character_2 }
						}
						save_scope_as = me_syracuse_picked_character_2
					}
					else_if = {
						limit = { 
							exists = scope:me_syracuse_picked_character_1
							exists = scope:me_syracuse_picked_character_2
							NOT = { exists = scope:me_syracuse_picked_character_3 }
						}
						save_scope_as = me_syracuse_picked_character_3
					}
				}
			}
		}
	}
}

me_syr_resentful_effect = {
	hidden_effect = {
		random = {
			chance = 50
			modifier = {
				factor = 1.2
				has_tendency_to_bitterness = yes
			}	
			set_variable = me_syr_leadership_rejected
		}
	}
}

me_syr_rebel_start_member_effect = {
	hidden_effect = {
		while = {
			count = 2
			ordered_character = {
				limit = {
					is_alive = yes
					is_adult = yes
					prisoner = no
					has_culture_group = hellenic
					trigger_if = {
						limit = {
							employer = { gender_equality = no }
						}
						is_female = no
					}
					NOR = {
						is_close_relative = root.current_ruler
						is_friend = root.current_ruler
						is_spouse_of = root.current_ruler
						has_same_family = root.current_ruler
						has_character_modifier = foreign_citizen
					}
				}
				order_by = {
					value = 0 
					subtract = loyalty
				}
			}
			ordered_character = {
				limit = {
					is_alive = yes
					is_adult = yes
					prisoner = no
					has_culture_group = hellenic
					trigger_if = {
						limit = {
							employer = { gender_equality = no }
						}
						is_female = no
					}
					NOR = {
						is_close_relative = root.current_ruler
						is_friend = root.current_ruler
						is_spouse_of = root.current_ruler
						has_same_family = root.current_ruler
						has_character_modifier = foreign_citizen
					}
				}
				order_by = {
					value = 0 
					subtract = loyalty
				}
			}
		}
	}
}

me_syr_troop_counter_effect = {
	change_variable = {
		name = syr_troop_count_var
		add = 1
	} 
}

me_syr_6_personality_effect = {
	random_list = {
		2 = {
			scope:me_syr_heir_scope = {
				set_variable = {
					name = me_syr_6_outcome
					value = 1 # genuine convinced
				}
			}
			modifier = {
				factor = 3
				root.var:me_syr_6_approach = 1 # convince good
				scope:me_syr_heir_scope = {
					OR = {
						has_trait = pious
						has_trait = devout
						has_trait = good_natured
						has_trait = just
						has_trait = benefactor
						has_trait = humble
						has_trait = honest
						has_trait = modest
						has_trait = content
						has_trait = kindly
						has_trait = weak_willed
						has_trait = coward
						has_trait = lazy
					}
				}
			}
			modifier = {
				factor = 0
				root.var:me_syr_6_approach = 1 # convince bad
				scope:me_syr_heir_scope = {
					OR = {
						has_trait = selfish
						has_trait = arbitrary
						has_trait = ambitious
						has_trait = cruel
						has_trait = harsh
						has_trait = proud
						has_trait = arrogant
						has_trait = stubborn
						has_trait = uncaring
					}
				}
			}
			modifier = {
				factor = 3
				root.var:me_syr_6_approach = 2 # bribe good
				scope:me_syr_heir_scope = {
					OR = {
						has_trait = crafty
						has_trait = lapsed
						has_trait = selfish
						has_trait = miserly
						has_trait = shrewd
						has_trait = arbitrary
						has_trait = content
						has_trait = lazy
						has_trait = gluttonous
						has_trait = corrupt
						has_trait = arbitrary
						has_trait = righteous
						has_trait = shrewd
					}
				}
			}
			modifier = {
				factor = 0
				root.var:me_syr_6_approach = 2 # bribe bad
				scope:me_syr_heir_scope = {
					OR = {
						has_trait = pious
						has_trait = devout
						has_trait = righteous
						has_trait = honest
						has_trait = generous
						has_trait = just
					}
				}
			}
			modifier = {
				factor = 3
				root.var:me_syr_6_approach = 3 # trick good
				scope:me_syr_heir_scope = {
					OR = {
						has_trait = guileless
						has_trait = submissive
						has_trait = dumb
						has_trait = incapable
						has_trait = foolish
						has_trait = weak_willed
						has_trait = rash
					}
				}
			}
			modifier = {
				factor = 0
				root.var:me_syr_6_approach = 3 # trick bad
				scope:me_syr_heir_scope = {
					OR = {
						has_trait = intelligent
						has_trait = crafty
						has_trait = shrewd
						has_trait = wise
					}
				}
			}
		}
		2 = {
			scope:me_syr_heir_scope = {
				set_variable = {
					name = me_syr_6_outcome
					value = 2 # exploiting convinced
				}
			}
			modifier = {
				factor = 2
				scope:me_syr_heir_scope = { # deceiver
					OR = {
						is_rival = root.current_ruler
						has_trait = crafty
						has_trait = ambitious
						has_trait = selfish
						has_trait = deceitful
						has_trait = intelligent
						has_trait = assertive
						has_trait = proud
						has_trait = arrogant
						has_trait = cruel
						has_trait = corrupt
						has_trait = arbitrary
						has_trait = righteous
						has_trait = shrewd
						has_trait = cold
						has_trait = harsh
					}
				}
			}
			modifier = {
				factor = 0
				scope:me_syr_heir_scope = { # cannot deceive
					OR = {
						has_trait = pious
						has_trait = devout
						has_trait = good_natured
						has_trait = just
						has_trait = benefactor
						has_trait = honest
						has_trait = kindly
					}
				}
			}
		}
		4 = {
			scope:me_syr_heir_scope = {
				set_variable = {
					name = me_syr_6_outcome
					value = 3 # unconvinced
				}
			}
			modifier = {
				factor = 2
				scope:me_syr_heir_scope = {
					OR = {
						is_friend = root.current_ruler
						has_trait = cold
						has_trait = cautious
						has_trait = loving
					}
				}
			}
		}
	}
}

spartan_mission_04_variable_cleanup_effect = {
	if = {
		limit = {
			has_variable = spartan_mission_04_athens_branch
		}
		remove_variable = spartan_mission_04_athens_branch
	}
	if = {
		limit = {
			has_variable = spartan_mission_04_thebes_branch
		}
		remove_variable = spartan_mission_04_thebes_branch
	}
	if = {
		limit = {
			has_variable = spartan_mission_04_macedon_branch
		}
		remove_variable = spartan_mission_04_macedon_branch
	}
}

me_syr_2_5_7_effect = {
	ordered_country = {
        limit = { 
            has_land = yes
            me_syr_sic_trigger = yes
            has_variable = me_syr_accept_var
            var:me_syr_accept_var = 1
            is_subject = no
        }
        order_by = country_population
        max = 5
        check_range_bounds = no
        if = {
            limit = {
                NOT = { exists = scope:me_syr_sic_tag_1 }
            }
            save_scope_as = me_syr_sic_tag_1
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                NOT = { exists = scope:me_syr_sic_tag_2 }
            }
            save_scope_as = me_syr_sic_tag_2
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                NOT = { exists = scope:me_syr_sic_tag_3 }
            }
            save_scope_as = me_syr_sic_tag_3
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                exists = scope:me_syr_sic_tag_3
                NOT = { exists = scope:me_syr_sic_tag_4 }
            }
            save_scope_as = me_syr_sic_tag_4
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                exists = scope:me_syr_sic_tag_3
                exists = scope:me_syr_sic_tag_4
                NOT = { exists = scope:me_syr_sic_tag_5 }
            }
            save_scope_as = me_syr_sic_tag_5
        }
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_1
        	scope:me_syr_sic_tag_1 = { is_ai = yes }
        }
        make_subject = {
            type = feudatory
            target = scope:me_syr_sic_tag_1
        }
    }
	else_if = {
		limit = {
        	exists = scope:me_syr_sic_tag_1
        	scope:me_syr_sic_tag_1 = { is_ai = no }
        }
        show_as_tooltip = {
	        make_subject = {
	            type = feudatory
	            target = scope:me_syr_sic_tag_1
	        }
	    }
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_2
        	scope:me_syr_sic_tag_2 = { is_ai = yes }
        }
        make_subject = {
            type = feudatory
            target = scope:me_syr_sic_tag_2
        }
    }
	else_if = {
		limit = {
        	exists = scope:me_syr_sic_tag_2
        	scope:me_syr_sic_tag_2 = { is_ai = no }
        }
        show_as_tooltip = {
	        make_subject = {
	            type = feudatory
	            target = scope:me_syr_sic_tag_2
	        }
	    }
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_3
        	scope:me_syr_sic_tag_3 = { is_ai = yes }
        }
        make_subject = {
            type = feudatory
            target = scope:me_syr_sic_tag_3
        }
    }
	else_if = {
		limit = {
        	exists = scope:me_syr_sic_tag_3
        	scope:me_syr_sic_tag_3 = { is_ai = no }
        }
        show_as_tooltip = {
	        make_subject = {
	            type = feudatory
	            target = scope:me_syr_sic_tag_3
	        }
	    }
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_4
        	scope:me_syr_sic_tag_4 = { is_ai = yes }
        }
        make_subject = {
            type = feudatory
            target = scope:me_syr_sic_tag_4
        }
    }
	else_if = {
		limit = {
        	exists = scope:me_syr_sic_tag_4
        	scope:me_syr_sic_tag_4 = { is_ai = no }
        }
        show_as_tooltip = {
	        make_subject = {
	            type = feudatory
	            target = scope:me_syr_sic_tag_4
	        }
	    }
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_5
        	scope:me_syr_sic_tag_5 = { is_ai = yes }
        }
        make_subject = {
            type = feudatory
            target = scope:me_syr_sic_tag_5
        }
    }
	else_if = {
		limit = {
        	is_ai = no
        	exists = scope:me_syr_sic_tag_5
        	scope:me_syr_sic_tag_5 = { is_ai = no }
        }
        show_as_tooltip = {
	        make_subject = {
	            type = feudatory
	            target = scope:me_syr_sic_tag_5
	        }
	    }
    }
}

me_syr_siceliote_ai_effect = {
    random_list = {
        3 = {
            change_variable = {
                name = me_syr_accept_var
                add = 1
            }
            modifier = {
                factor = 1.25
            }
            modifier = {
                factor = 1.5
            }
            modifier = {
            	factor = 2
            	AND = {
            		any_neighbour_country = {
            			OR = {
            				tag = CAR
            				is_subject_of = c:CAR
            			}
            		}
            	}
            }
        }
        2 = {
            modifier = {
                factor = 1.25
            }
            modifier = {
                factor = 1.5
            }
            modifier = {
                factor = 10
            }
            modifier = {
                factor = 3
                tag = ACR
            }

        }
    }
}

me_syr_siceliote_ai_player_effect = {
	ordered_country = {
        limit = {
            primary_culture = syracusan
            capital_scope = {
                OR = {
                    is_in_area = syracuse_area
                    is_in_area = east_sicily_area
                    is_in_area = west_sicily_area
                }
            }
            is_subject = no
            num_of_cities <= 2
            NOT = { tag = SYR }
        }
        order_by = country_population
        max = 5
        check_range_bounds = no
        set_variable = {
            name = me_syr_accept_var
            value = 0
        }
        hidden_effect = {
            if = {
                limit = { is_ai = yes }
                me_syr_siceliote_ai_effect = yes
            }
            else_if = {
            	limit = { 
            	}
            	trigger_event = { id = me_syracuse_3_punic.17 }
            }
            else = {
                trigger_event = { id = me_syracuse_2_sicily.5 }
            }
        }
    }
}

me_syr_siceliote_ab_ai_player_effect = {
	ordered_country = {
        limit = {
            primary_culture = syracusan
            capital_scope = {
                OR = {
                    is_in_area = syracuse_area
                    is_in_area = east_sicily_area
                    is_in_area = west_sicily_area
                }
            }
            is_subject = yes
            is_subject_of = c:CAR
            num_of_cities <= 2
            NOT = { tag = SYR }
        }
        order_by = country_population
        max = 5
        check_range_bounds = no
        set_variable = {
            name = me_syr_accept_var
            value = 0
        }
        hidden_effect = {
            if = {
                limit = { is_ai = yes }
                me_syr_siceliote_ab_ai_effect = yes
            }
            else = {
            	trigger_event = { id = me_syracuse_3_punic.18 }
            }
        }
    }
}

me_syr_siceliote_ab_ai_effect = {
    random_list = {
        4 = {
            change_variable = {
                name = me_syr_accept_var
                add = 1
            }
            modifier = {
                factor = 1.25
            }
            modifier = {
                factor = 1.25
                opinion = { target = overlord value < 50 }
            }
            modifier = {
                factor = 1.5
            }
            modifier = {
                factor = 1.5
                opinion = { target = overlord value < 0 }
            }
            modifier = {
            	factor = 2
            	opinion = { target = overlord value < -50 }
            }
        }
        2 = {
            modifier = {
                factor = 1.25
            }
            modifier = {
                factor = 1.5
            }
            modifier = {
                factor = 10
            }
        }
    }
}

me_syr_3_3_8_effect = {
	ordered_country = {
        limit = { 
            has_land = yes
            me_syr_sic_trigger = yes
            has_variable = me_syr_accept_var
            var:me_syr_accept_var = 1
            is_subject = no
            NOT = { tag = SYR }
        }
        order_by = country_population
        max = 5
        check_range_bounds = no
        if = {
            limit = {
                NOT = { exists = scope:me_syr_sic_tag_1 }
            }
            save_scope_as = me_syr_sic_tag_1
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                NOR = { 
                	this = scope:me_syr_sic_tag_1
                	exists = scope:me_syr_sic_tag_2 
                }
            }
            save_scope_as = me_syr_sic_tag_2
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                NOR = { 
                	this = scope:me_syr_sic_tag_1
                	this = scope:me_syr_sic_tag_2
                	exists = scope:me_syr_sic_tag_3 
                }
            }
            save_scope_as = me_syr_sic_tag_3
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                exists = scope:me_syr_sic_tag_3
                NOR = { 
                	this = scope:me_syr_sic_tag_1
                	this = scope:me_syr_sic_tag_2
                	this = scope:me_syr_sic_tag_3
                	exists = scope:me_syr_sic_tag_4
                }
            }
            save_scope_as = me_syr_sic_tag_4
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                exists = scope:me_syr_sic_tag_3
                exists = scope:me_syr_sic_tag_4
                NOR = { 
                	this = scope:me_syr_sic_tag_1
                	this = scope:me_syr_sic_tag_2
                	this = scope:me_syr_sic_tag_3
                	this = scope:me_syr_sic_tag_4
                	exists = scope:me_syr_sic_tag_5
                }
            }
            save_scope_as = me_syr_sic_tag_5
        }
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_1
        	scope:me_syr_sic_tag_1 = { is_ai = yes }
        }
        if = {
            limit = {
                NOT = { alliance_with = scope:me_syr_sic_tag_1 }
            }
            add_alliance = scope:me_syr_sic_tag_1
        }
        add_truce = {
        	target = scope:me_syr_sic_tag_1
        	duration = 9125 # 25 years
        }
    }
	else_if = {
		limit = {
        	exists = scope:me_syr_sic_tag_1
        	scope:me_syr_sic_tag_1 = { is_ai = no }
        }
        show_as_tooltip = {
	      	add_alliance = scope:me_syr_sic_tag_1
	      	add_truce = {
	        	target = scope:me_syr_sic_tag_1
	        	duration = 9125 # 25 years
	        }
	    }
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_2
        	scope:me_syr_sic_tag_2 = { is_ai = yes }
        }
        if = {
            limit = {
                NOT = { alliance_with = scope:me_syr_sic_tag_2 }
            }
            add_alliance = scope:me_syr_sic_tag_2
        }
    	add_truce = {
        	target = scope:me_syr_sic_tag_2
        	duration = 9125 # 25 years
        }
    }
	else_if = {
		limit = {
        	exists = scope:me_syr_sic_tag_2
        	scope:me_syr_sic_tag_2 = { is_ai = no }
        }
        show_as_tooltip = {
	      	add_alliance = scope:me_syr_sic_tag_2
	      	add_truce = {
        		target = scope:me_syr_sic_tag_2
        		duration = 9125 # 25 years
        	}
	    }
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_3
        	scope:me_syr_sic_tag_3 = { is_ai = yes }
        }
        if = {
            limit = {
                NOT = { alliance_with = scope:me_syr_sic_tag_3 }
            }
            add_alliance = scope:me_syr_sic_tag_3
        }
        add_truce = {
    		target = scope:me_syr_sic_tag_3
    		duration = 9125 # 25 years
    	}
    }
	else_if = {
		limit = {
        	exists = scope:me_syr_sic_tag_3
        	scope:me_syr_sic_tag_3 = { is_ai = no }
        }
        show_as_tooltip = {
	        add_alliance = scope:me_syr_sic_tag_3
	        add_truce = {
        		target = scope:me_syr_sic_tag_3
        		duration = 9125 # 25 years
        	}
	    }
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_4
        	scope:me_syr_sic_tag_4 = { is_ai = yes }
        }
        if = {
            limit = {
                NOT = { alliance_with = scope:me_syr_sic_tag_4 }
            }
            add_alliance = scope:me_syr_sic_tag_4
        }
    	add_truce = {
    		target = scope:me_syr_sic_tag_4
    		duration = 9125 # 25 years
    	}
    }
	else_if = {
		limit = {
        	exists = scope:me_syr_sic_tag_4
        	scope:me_syr_sic_tag_4 = { is_ai = no }
        }
        show_as_tooltip = {
	        add_alliance = scope:me_syr_sic_tag_4
	        add_truce = {
        		target = scope:me_syr_sic_tag_4
        		duration = 9125 # 25 years
        	}
	    }
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_5
        	scope:me_syr_sic_tag_5 = { is_ai = yes }
        }
        if = {
            limit = {
                NOT = { alliance_with = scope:me_syr_sic_tag_5 }
            }
            add_alliance = scope:me_syr_sic_tag_5
        }
        add_truce = {
    		target = scope:me_syr_sic_tag_5
    		duration = 9125 # 25 years
    	}
    }
	else_if = {
		limit = {
        	is_ai = no
        	exists = scope:me_syr_sic_tag_5
        	scope:me_syr_sic_tag_5 = { is_ai = no }
        }
        show_as_tooltip = {
	       add_alliance = scope:me_syr_sic_tag_5
	       add_truce = {
        		target = scope:me_syr_sic_tag_5
        		duration = 9125 # 25 years
        	}
	    }
    }
}

me_syr_3_5_effect = {
	ordered_country = {
        limit = { 
            has_land = yes
            primary_culture = syracusan
            capital_scope = {
                OR = {
                    is_in_area = syracuse_area
                    is_in_area = east_sicily_area
                    is_in_area = west_sicily_area
                }
            }
            num_of_cities <= 2
            NOT = { tag = SYR }
            is_subject = yes
            is_subject_of = c:CAR
            has_variable = me_syr_accept_var
            var:me_syr_accept_var = 1
        }
        order_by = country_population
        max = 5
        check_range_bounds = no
       	if = {
            limit = {
                NOT = { exists = scope:me_syr_sic_tag_1 }
            }
            save_scope_as = me_syr_sic_tag_1
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                NOR = { 
                	this = scope:me_syr_sic_tag_1
                	exists = scope:me_syr_sic_tag_2 
                }
            }
            save_scope_as = me_syr_sic_tag_2
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                NOR = { 
                	this = scope:me_syr_sic_tag_1
                	this = scope:me_syr_sic_tag_2
                	exists = scope:me_syr_sic_tag_3 
                }
            }
            save_scope_as = me_syr_sic_tag_3
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                exists = scope:me_syr_sic_tag_3
                NOR = { 
                	this = scope:me_syr_sic_tag_1
                	this = scope:me_syr_sic_tag_2
                	this = scope:me_syr_sic_tag_3
                	exists = scope:me_syr_sic_tag_4
                }
            }
            save_scope_as = me_syr_sic_tag_4
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                exists = scope:me_syr_sic_tag_3
                exists = scope:me_syr_sic_tag_4
                NOR = { 
                	this = scope:me_syr_sic_tag_1
                	this = scope:me_syr_sic_tag_2
                	this = scope:me_syr_sic_tag_3
                	this = scope:me_syr_sic_tag_4
                	exists = scope:me_syr_sic_tag_5
                }
            }
            save_scope_as = me_syr_sic_tag_5
        }
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_1
        	scope:me_syr_sic_tag_1 = { is_ai = yes }
        }
        c:CAR = {
        	hidden_effect = { 
        		release_subject = scope:me_syr_sic_tag_1
        		custom_tooltip = me_syr_3_5_subject_tt_1
        		add_opinion = { target = scope:me_syr_sic_tag_1 modifier = me_3_5_syr_treacherous_subject_opmod }
        	}
        }
        hidden_effect = {
        	scope:me_syr_sic_tag_1 = {
        		every_owned_province = { add_claim = c:CAR }
        	}
        	add_truce = {
        		target = scope:me_syr_sic_tag_1
	        	duration = 9125 # 25 years
	        }
        }
        add_alliance = scope:me_syr_sic_tag_1
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_2
        	scope:me_syr_sic_tag_2 = { is_ai = yes }
        }
        c:CAR = {
        	hidden_effect = { 
        		release_subject = scope:me_syr_sic_tag_2
        		custom_tooltip = me_syr_3_5_subject_tt_2
        		add_opinion = { target = scope:me_syr_sic_tag_2 modifier = me_3_5_syr_treacherous_subject_opmod }
        	}
        }
        hidden_effect = {
        	scope:me_syr_sic_tag_2 = {
        		every_owned_province = { add_claim = c:CAR }
        	}
        	add_truce = {
        		target = scope:me_syr_sic_tag_2
	        	duration = 9125 # 25 years
	        }
        }
        add_alliance = scope:me_syr_sic_tag_2
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_3
        	scope:me_syr_sic_tag_3 = { is_ai = yes }
        }
        c:CAR = {
        	hidden_effect = { 
        		release_subject = scope:me_syr_sic_tag_3
        		custom_tooltip = me_syr_3_5_subject_tt_3
        		add_opinion = { target = scope:me_syr_sic_tag_3 modifier = me_3_5_syr_treacherous_subject_opmod }
        	}
        }
        hidden_effect = {
        	scope:me_syr_sic_tag_3 = {
        		every_owned_province = { add_claim = c:CAR }
        	}
        	add_truce = {
        		target = scope:me_syr_sic_tag_3
	        	duration = 9125 # 25 years
	        }
        }
        add_alliance = scope:me_syr_sic_tag_3
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_4
        	scope:me_syr_sic_tag_4 = { is_ai = yes }
        }
        c:CAR = {
        	hidden_effect = { 
        		release_subject = scope:me_syr_sic_tag_4
        		custom_tooltip = me_syr_3_5_subject_tt_4
        		add_opinion = { target = scope:me_syr_sic_tag_4 modifier = me_3_5_syr_treacherous_subject_opmod }
        	}
        }
        hidden_effect = {
        	scope:me_syr_sic_tag_4 = {
        		every_owned_province = { add_claim = c:CAR }
        	}
        	add_truce = {
        		target = scope:me_syr_sic_tag_4
	        	duration = 9125 # 25 years
	        }
        }
        add_alliance = scope:me_syr_sic_tag_4
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_5
        	scope:me_syr_sic_tag_5 = { is_ai = yes }
        }
        c:CAR = {
        	hidden_effect = { 
        		release_subject = scope:me_syr_sic_tag_5
        		custom_tooltip = me_syr_3_5_subject_tt_5
        		add_opinion = { target = scope:me_syr_sic_tag_5 modifier = me_3_5_syr_treacherous_subject_opmod }
        	}
        }
        hidden_effect = {
        	scope:me_syr_sic_tag_5 = {
        		every_owned_province = { add_claim = c:CAR }
        	}
        	add_truce = {
        		target = scope:me_syr_sic_tag_5
	        	duration = 9125 # 25 years
	        }
        }
        add_alliance = scope:me_syr_sic_tag_5
    }
}

me_syr_clear_tag_scopes_effect = {
	if = {
		limit = { exists = scope:me_syr_sic_tag_1 }
		random_country = {
			limit = { this = scope:me_syr_sic_tag_1 }
			clear_saved_scope = me_syr_sic_tag_1
		}
	}
	if = {
		limit = { exists = scope:me_syr_sic_tag_2 }
		random_country = {
			limit = { this = scope:me_syr_sic_tag_2 }
			clear_saved_scope = me_syr_sic_tag_2
		}
	}
	if = {
		limit = { exists = scope:me_syr_sic_tag_3 }
		random_country = {
			limit = { this = scope:me_syr_sic_tag_3 }
			clear_saved_scope = me_syr_sic_tag_3
		}
	}
	if = {
		limit = { exists = scope:me_syr_sic_tag_4 }
		random_country = {
			limit = { this = scope:me_syr_sic_tag_4 }
			clear_saved_scope = me_syr_sic_tag_4
		}
	}
	if = {
		limit = { exists = scope:me_syr_sic_tag_5 }
		random_country = {
			limit = { this = scope:me_syr_sic_tag_5 }
			clear_saved_scope = me_syr_sic_tag_5
		}
	}
}

me_syr_4_support_scope_effect = {
	if = {
		limit = { exists = scope:me_syr_sic_tag_1 }
		random_country = {
			limit = { this = scope:me_syr_sic_tag_1 }
			clear_saved_scope = me_syr_sic_tag_1
		}
	}
	if = {
		limit = { exists = scope:me_syr_sic_tag_2 }
		random_country = {
			limit = { this = scope:me_syr_sic_tag_2 }
			clear_saved_scope = me_syr_sic_tag_2
		}
	}
	if = {
		limit = { exists = scope:me_syr_sic_tag_3 }
		random_country = {
			limit = { this = scope:me_syr_sic_tag_3 }
			clear_saved_scope = me_syr_sic_tag_3
		}
	}
	if = {
		limit = { exists = scope:me_syr_sic_tag_4 }
		random_country = {
			limit = { this = scope:me_syr_sic_tag_4 }
			clear_saved_scope = me_syr_sic_tag_4
		}
	}
	if = {
		limit = { exists = scope:me_syr_sic_tag_5 }
		random_country = {
			limit = { this = scope:me_syr_sic_tag_5 }
			clear_saved_scope = me_syr_sic_tag_5
		}
	}
	if = {
		limit = { exists = scope:me_syr_sic_tag_6 }
		random_country = {
			limit = { this = scope:me_syr_sic_tag_6 }
			clear_saved_scope = me_syr_sic_tag_6
		}
	}
	ordered_country = {
        limit = {
            has_land = yes
            country_culture_group = hellenic
            rank > root.rank
            NOR = {
                alliance_with = root
                war_with = root
                opinion = { target = root value <= -25 }
            	has_variable = me_syr_4_9_response
            	AND = {
            		exists = scope:me_syr_response_scope
            		this = scope:me_syr_response_scope
            	}
            }
        }
        order_by = country_population
        max = 6
        check_range_bounds = no
        if = {
            limit = {
                NOR = { 
                	AND = {
                		exists = scope:me_syr_response_scope
                		this = scope:me_syr_response_scope
                	}
					exists = scope:me_syr_sic_tag_1
				}
            }
            save_scope_as = me_syr_sic_tag_1
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                NOR = {
                	AND = {
                		exists = scope:me_syr_response_scope
                		this = scope:me_syr_response_scope
                	}
                    this = scope:me_syr_sic_tag_1
                    exists = scope:me_syr_sic_tag_2 
                }
            }
            save_scope_as = me_syr_sic_tag_2
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                NOR = {
                	AND = {
                		exists = scope:me_syr_response_scope
                		this = scope:me_syr_response_scope
                	}
                    this = scope:me_syr_sic_tag_1
                    this = scope:me_syr_sic_tag_2
                    exists = scope:me_syr_sic_tag_3 
                }
            }
            save_scope_as = me_syr_sic_tag_3
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                exists = scope:me_syr_sic_tag_3
                NOR = { 
                	AND = {
                		exists = scope:me_syr_response_scope
                		this = scope:me_syr_response_scope
                	}
                    this = scope:me_syr_sic_tag_1
                    this = scope:me_syr_sic_tag_2
                    this = scope:me_syr_sic_tag_3
                    exists = scope:me_syr_sic_tag_4
                }
            }
            save_scope_as = me_syr_sic_tag_4
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                exists = scope:me_syr_sic_tag_3
                exists = scope:me_syr_sic_tag_4
                NOR = { 
                	AND = {
                		exists = scope:me_syr_response_scope
                		this = scope:me_syr_response_scope
                	}
                    this = scope:me_syr_sic_tag_1
                    this = scope:me_syr_sic_tag_2
                    this = scope:me_syr_sic_tag_3
                    this = scope:me_syr_sic_tag_4
                    exists = scope:me_syr_sic_tag_5
                }
            }
            save_scope_as = me_syr_sic_tag_5
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                exists = scope:me_syr_sic_tag_3
                exists = scope:me_syr_sic_tag_4
                exists = scope:me_syr_sic_tag_5
                NOR = {
                	AND = {
                		exists = scope:me_syr_response_scope
                		this = scope:me_syr_response_scope
                	}
                    this = scope:me_syr_sic_tag_1
                    this = scope:me_syr_sic_tag_2
                    this = scope:me_syr_sic_tag_3
                    this = scope:me_syr_sic_tag_4
                    this = scope:me_syr_sic_tag_5
                    exists = scope:me_syr_sic_tag_6
                }
            }
            save_scope_as = me_syr_sic_tag_6
        }
    }
}

me_syr_italic_negotiation_effect = {
	ordered_country = {
        limit = {
        	has_land = yes
        	is_subject = yes
            country_culture_group = hellenic
            capital_scope = { is_in_region = magna_graecia_region }
            overlord = { 
            	country_culture_group = latin
                NOT = { primary_culture = roman }
            }
        }
        order_by = country_population
        max = 5
        check_range_bounds = no
        set_variable = {
            name = me_syr_accept_var
            value = 0
        }
        hidden_effect = {
            if = {
                limit = { is_ai = yes }
                me_syr_siceliote_ab_ai_effect = yes
            }
            else = {
            	trigger_event = { id = me_syracuse_4_magna.25 }
            }
        }
    } 
}

me_syr_4_2_effect = {
	ordered_country = {
        limit = { 
            has_land = yes
        	is_subject = yes
            country_culture_group = hellenic
            capital_scope = { is_in_region = magna_graecia_region }
            overlord = { 
            	country_culture_group = latin
                NOT = { primary_culture = roman }
            }
            has_variable = me_syr_accept_var
            var:me_syr_accept_var = 1
        }
        order_by = country_population
        max = 5
        check_range_bounds = no
       	if = {
            limit = {
                NOT = { exists = scope:me_syr_sic_tag_1 }
            }
            save_scope_as = me_syr_sic_tag_1
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                NOR = { 
                	this = scope:me_syr_sic_tag_1
                	exists = scope:me_syr_sic_tag_2 
                }
            }
            save_scope_as = me_syr_sic_tag_2
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                NOR = { 
                	this = scope:me_syr_sic_tag_1
                	this = scope:me_syr_sic_tag_2
                	exists = scope:me_syr_sic_tag_3 
                }
            }
            save_scope_as = me_syr_sic_tag_3
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                exists = scope:me_syr_sic_tag_3
                NOR = { 
                	this = scope:me_syr_sic_tag_1
                	this = scope:me_syr_sic_tag_2
                	this = scope:me_syr_sic_tag_3
                	exists = scope:me_syr_sic_tag_4
                }
            }
            save_scope_as = me_syr_sic_tag_4
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                exists = scope:me_syr_sic_tag_3
                exists = scope:me_syr_sic_tag_4
                NOR = { 
                	this = scope:me_syr_sic_tag_1
                	this = scope:me_syr_sic_tag_2
                	this = scope:me_syr_sic_tag_3
                	this = scope:me_syr_sic_tag_4
                	exists = scope:me_syr_sic_tag_5
                }
            }
            save_scope_as = me_syr_sic_tag_5
        }
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_1
        	scope:me_syr_sic_tag_1 = { is_ai = yes }
        }
        scope:me_syr_sic_tag_1.overlord = { save_scope_as = me_syr_sic_tag_overlord_1 }
        hidden_effect = {
        	scope:me_syr_sic_tag_1 = {
        		every_owned_province = { add_claim = scope:me_syr_sic_tag_overlord_1 }
        	}
	        scope:me_syr_sic_tag_overlord_1 = {
	        	release_subject = scope:me_syr_sic_tag_1
	        	add_opinion = { target = scope:me_syr_sic_tag_1 modifier = me_3_5_syr_treacherous_subject_opmod }
	        }
	    }
        add_alliance = scope:me_syr_sic_tag_1
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_2
        	scope:me_syr_sic_tag_2 = { is_ai = yes }
        }
        scope:me_syr_sic_tag_2.overlord = { save_scope_as = me_syr_sic_tag_overlord_2 }
        hidden_effect = {
        	scope:me_syr_sic_tag_2 = {
        		every_owned_province = { add_claim = scope:me_syr_sic_tag_overlord_2 }
        	}
	        scope:me_syr_sic_tag_overlord_2 = {
        		release_subject = scope:me_syr_sic_tag_2
        		add_opinion = { target = scope:me_syr_sic_tag_2 modifier = me_3_5_syr_treacherous_subject_opmod }
	        }
	    }
        add_alliance = scope:me_syr_sic_tag_2
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_3
        	scope:me_syr_sic_tag_3 = { is_ai = yes }
        }
        scope:me_syr_sic_tag_3.overlord = { save_scope_as = me_syr_sic_tag_overlord_3 }
        hidden_effect = {
        	scope:me_syr_sic_tag_3 = {
        		every_owned_province = { add_claim = scope:me_syr_sic_tag_overlord_3 }
        	}
        	scope:me_syr_sic_tag_overlord_3 = {
        		release_subject = scope:me_syr_sic_tag_3
        		add_opinion = { target = scope:me_syr_sic_tag_3 modifier = me_3_5_syr_treacherous_subject_opmod }
        	}
        }
        add_alliance = scope:me_syr_sic_tag_3
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_4
        	scope:me_syr_sic_tag_4 = { is_ai = yes }
        }
        scope:me_syr_sic_tag_4.overlord = { save_scope_as = me_syr_sic_tag_overlord_4 }
        hidden_effect = {
        	scope:me_syr_sic_tag_4 = {
        		every_owned_province = { add_claim = scope:me_syr_sic_tag_overlord_4 }
        	}
	        scope:me_syr_sic_tag_overlord_4 = {
        		release_subject = scope:me_syr_sic_tag_4
        		add_opinion = { target = scope:me_syr_sic_tag_4 modifier = me_3_5_syr_treacherous_subject_opmod }
        	}
	    }
        add_alliance = scope:me_syr_sic_tag_4
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_5
        	scope:me_syr_sic_tag_5 = { is_ai = yes }
        }
        scope:me_syr_sic_tag_5.overlord = { save_scope_as = me_syr_sic_tag_overlord_5 }
        hidden_effect = {
        	scope:me_syr_sic_tag_5 = {
        		every_owned_province = { add_claim = scope:me_syr_sic_tag_overlord_5 }
        	}
	        scope:me_syr_sic_tag_overlord_5 = {
        		release_subject = scope:me_syr_sic_tag_5
        		add_opinion = { target = scope:me_syr_sic_tag_5 modifier = me_3_5_syr_treacherous_subject_opmod }
	        }
	    }
        add_alliance = scope:me_syr_sic_tag_5
    }
}

me_syr_italic_opinion_effect = {
	if = {
        limit = { exists = scope:me_syr_sic_tag_overlord_1 }
        scope:me_syr_sic_tag_overlord_1 = {
            add_opinion = { target = root modifier = me_syr_3_5_subject_meddling }
        }
    }
    if = {
        limit = { exists = scope:me_syr_sic_tag_overlord_2 }
        scope:me_syr_sic_tag_overlord_2 = {
            add_opinion = { target = root modifier = me_syr_3_5_subject_meddling }
        }
    }
    if = {
        limit = { exists = scope:me_syr_sic_tag_overlord_3 }
        scope:me_syr_sic_tag_overlord_3 = {
            add_opinion = { target = root modifier = me_syr_3_5_subject_meddling }
        }
    }
    if = {
        limit = { exists = scope:me_syr_sic_tag_overlord_4 }
        scope:me_syr_sic_tag_overlord_4 = {
            add_opinion = { target = root modifier = me_syr_3_5_subject_meddling }
        }
    }
}

me_syr_italiote_ai_player_effect = {
	ordered_country = {
        limit = { me_syr_ita_trigger = yes }
        order_by = country_population
        max = 5
        check_range_bounds = no
        set_variable = {
            name = me_syr_accept_var
            value = 0
        }
        hidden_effect = {
            if = {
                limit = { is_ai = yes }
                me_syr_italiote_ai_effect = yes
            }
            else = {
                trigger_event = { id = me_syracuse_4_magna.24 }
            }
        }
    }
}

me_syr_4_1_effect = {
	ordered_country = {
        limit = { 
            me_syr_ita_trigger = yes
            has_variable = me_syr_accept_var
            var:me_syr_accept_var = 1
            is_subject = no
            NOR = {
				alliance_with = root
				tag = SYR
				tag = SII
			}
        }
        order_by = country_population
        max = 5
        check_range_bounds = no
        if = {
            limit = {
                NOT = { exists = scope:me_syr_sic_tag_1 }
            }
            save_scope_as = me_syr_sic_tag_1
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                NOR = { 
                	this = scope:me_syr_sic_tag_1
                	exists = scope:me_syr_sic_tag_2 
                }
            }
            save_scope_as = me_syr_sic_tag_2
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                NOR = { 
                	this = scope:me_syr_sic_tag_1
                	this = scope:me_syr_sic_tag_2
                	exists = scope:me_syr_sic_tag_3 
                }
            }
            save_scope_as = me_syr_sic_tag_3
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                exists = scope:me_syr_sic_tag_3
                NOR = { 
                	this = scope:me_syr_sic_tag_1
                	this = scope:me_syr_sic_tag_2
                	this = scope:me_syr_sic_tag_3
                	exists = scope:me_syr_sic_tag_4
                }
            }
            save_scope_as = me_syr_sic_tag_4
        }
        else_if = {
            limit = {
                exists = scope:me_syr_sic_tag_1
                exists = scope:me_syr_sic_tag_2
                exists = scope:me_syr_sic_tag_3
                exists = scope:me_syr_sic_tag_4
                NOR = { 
                	this = scope:me_syr_sic_tag_1
                	this = scope:me_syr_sic_tag_2
                	this = scope:me_syr_sic_tag_3
                	this = scope:me_syr_sic_tag_4
                	exists = scope:me_syr_sic_tag_5
                }
            }
            save_scope_as = me_syr_sic_tag_5
        }
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_1
        	scope:me_syr_sic_tag_1 = { is_ai = yes }
        }
        make_subject = {
        	target = scope:me_syr_sic_tag_1
        	type = feudatory
        }
        hidden_effect = {
	      	add_truce = {
        		target = scope:me_syr_sic_tag_1
        		duration = 9125 # 25 years
        	}
        }
    }
	else_if = {
		limit = {
        	exists = scope:me_syr_sic_tag_1
        	scope:me_syr_sic_tag_1 = { is_ai = no }
        }
        show_as_tooltip = {
	      	make_subject = {
	        	target = scope:me_syr_sic_tag_1
	        	type = feudatory
	        }
	    }
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_2
        	scope:me_syr_sic_tag_2 = { is_ai = yes }
        }
        make_subject = {
        	target = scope:me_syr_sic_tag_2
        	type = feudatory
        }
    	hidden_effect = {
	      	add_truce = {
        		target = scope:me_syr_sic_tag_2
        		duration = 9125 # 25 years
        	}
        }
    }
	else_if = {
		limit = {
        	exists = scope:me_syr_sic_tag_2
        	scope:me_syr_sic_tag_2 = { is_ai = no }
        }
        show_as_tooltip = {
	      	make_subject = {
	        	target = scope:me_syr_sic_tag_2
	        	type = feudatory
	        }
	    }
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_3
        	scope:me_syr_sic_tag_3 = { is_ai = yes }
        }
        make_subject = {
        	target = scope:me_syr_sic_tag_3
        	type = feudatory
        }
        hidden_effect = {
	      	add_truce = {
        		target = scope:me_syr_sic_tag_3
        		duration = 9125 # 25 years
        	}
        }
    }
	else_if = {
		limit = {
        	exists = scope:me_syr_sic_tag_3
        	scope:me_syr_sic_tag_3 = { is_ai = no }
        }
        show_as_tooltip = {
	        make_subject = {
		    	target = scope:me_syr_sic_tag_3
		    	type = feudatory
		    }
	    }
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_4
        	scope:me_syr_sic_tag_4 = { is_ai = yes }
        }
        make_subject = {
        	target = scope:me_syr_sic_tag_4
        	type = feudatory
        }
    	hidden_effect = {
	      	add_truce = {
        		target = scope:me_syr_sic_tag_4
        		duration = 9125 # 25 years
        	}
        }
    }
	else_if = {
		limit = {
        	exists = scope:me_syr_sic_tag_4
        	scope:me_syr_sic_tag_4 = { is_ai = no }
        }
        show_as_tooltip = {
	        make_subject = {
	        	target = scope:me_syr_sic_tag_4
	        	type = feudatory
	        }
	    }
    }
    if = {
        limit = {
        	exists = scope:me_syr_sic_tag_5
        	scope:me_syr_sic_tag_5 = { is_ai = yes }
        }
        make_subject = {
        	target = scope:me_syr_sic_tag_5
        	type = feudatory
        }
        hidden_effect = {
	      	add_truce = {
        		target = scope:me_syr_sic_tag_5
        		duration = 9125 # 25 years
        	}
        }
    }
	else_if = {
		limit = {
        	is_ai = no
        	exists = scope:me_syr_sic_tag_5
        	scope:me_syr_sic_tag_5 = { is_ai = no }
        }
        show_as_tooltip = {
	       	make_subject = {
	        	target = scope:me_syr_sic_tag_5
	        	type = feudatory
	        }
	    }
    }
}

athenian_mission_loyalist_family_bonus_effect = {
	if = {
		limit = {
			exists = scope:loyalist_family
		}
		scope:loyalist_family = {
    		add_prestige = 75
    		custom_tooltip = athenian_mission_loyalist_family_loyalty_tt
    		hidden_effect = {
        		every_family_member = {
        			add_loyalty = athenian_mission_01_appreciative_family
        		}
    		}
    	}
    	if = {
    		limit = {
    			exists = scope:independence_family
    		}
    		scope:independence_family = {
    			add_prestige = -75
    			custom_tooltip = athenian_mission_independence_family_disloyalty_tt
    			hidden_effect = {
    				every_family_member = {
    					add_loyalty = athenian_mission_01_unappreciative_family
    				}
    			}
    		}
    	}
	}	
}

athenian_mission_independence_family_bonus_effect = {
	if = {
		limit = {
			exists = scope:independence_family
		}
		scope:independence_family = {
    		add_prestige = 75
    		custom_tooltip = athenian_mission_independence_family_loyalty_tt
    		hidden_effect = {
        		every_family_member = {
        			add_loyalty = athenian_mission_01_appreciative_family
        		}
    		}
    	}
    	if = {
    		limit = {
    			exists = scope:loyalist_family
    		}
    		scope:loyalist_family = {
    			add_prestige = -75
    			custom_tooltip = athenian_mission_loyalist_family_disloyalty_tt
    			hidden_effect = {
    				every_family_member = {
    					add_loyalty = athenian_mission_01_unappreciative_family
    				}
    			}
    		}
    	}
	}	
}

athenian_mission_loyalist_path_modifier_effect = {
	custom_tooltip = athenian_mission_loyalist_path_modifier_effect_tt
	if = {
		limit = {
			has_country_modifier = athenian_mission_04_independence_path
		}
		hidden_effect = { remove_country_modifier = athenian_mission_04_independence_path }
		add_country_modifier = {
			name = athenian_mission_03_independence_path
			duration = 10950
		}
	}
	if = {
		limit = {
			has_country_modifier = athenian_mission_03_independence_path
		}
		hidden_effect = { remove_country_modifier = athenian_mission_03_independence_path }
		add_country_modifier = {
			name = athenian_mission_02_independence_path
			duration = 10950
		}
	}
	else_if = {
		limit = {
			has_country_modifier = athenian_mission_02_independence_path
		}
		hidden_effect = { remove_country_modifier = athenian_mission_02_independence_path }
		add_country_modifier = {
			name = athenian_mission_01_independence_path
			duration = 10950
		}
	}
	else_if = {
		limit = {
			has_country_modifier = athenian_mission_01_independence_path
		}
		hidden_effect = { remove_country_modifier = athenian_mission_01_independence_path }
		add_country_modifier = {
			name = athenian_mission_01_loyalist_path
			duration = 10950
		}
	}
	else_if = {
		limit = {
			has_country_modifier = athenian_mission_01_loyalist_path
		}
		hidden_effect = { remove_country_modifier = athenian_mission_01_loyalist_path }
		add_country_modifier = {
			name = athenian_mission_02_loyalist_path
			duration = 10950
		}
	}
	else_if = {
		limit = {
			has_country_modifier = athenian_mission_02_loyalist_path
		}
		hidden_effect = { remove_country_modifier = athenian_mission_02_loyalist_path }
		add_country_modifier = {
			name = athenian_mission_03_loyalist_path
			duration = 10950
		}
	}
	else = {
		add_country_modifier = {
			name = athenian_mission_01_loyalist_path
			duration = 10950
		}
	}
}

athenian_mission_independence_path_modifier_effect = {
	custom_tooltip = athenian_mission_independence_path_modifier_effect_tt
	if = {
		limit = {
			has_country_modifier = athenian_mission_03_loyalist_path
		}
		hidden_effect = { remove_country_modifier = athenian_mission_03_loyalist_path }
		add_country_modifier = {
			name = athenian_mission_02_loyalist_path
			duration = 10950
		}
	}
	else_if = {
		limit = {
			has_country_modifier = athenian_mission_02_loyalist_path
		}
		hidden_effect = { remove_country_modifier = athenian_mission_02_loyalist_path }
		add_country_modifier = {
			name = athenian_mission_01_loyalist_path
			duration = 10950
		}
	}
	else_if = {
		limit = {
			has_country_modifier = athenian_mission_01_loyalist_path
		}
		hidden_effect = { remove_country_modifier = athenian_mission_01_loyalist_path }
		add_country_modifier = {
			name = athenian_mission_01_independence_path
			duration = 10950
		}
	}
	else_if = {
		limit = {
			has_country_modifier = athenian_mission_01_independence_path
		}
		hidden_effect = { remove_country_modifier = athenian_mission_01_independence_path }
		add_country_modifier = {
			name = athenian_mission_02_independence_path
			duration = 10950
		}
	}
	else_if = {
		limit = {
			has_country_modifier = athenian_mission_02_independence_path
		}
		hidden_effect = { remove_country_modifier = athenian_mission_02_independence_path }
		add_country_modifier = {
			name = athenian_mission_03_independence_path
			duration = 10950
		}
	}
	else_if = {
		limit = {
			has_country_modifier = athenian_mission_03_independence_path
		}
		hidden_effect = { remove_country_modifier = athenian_mission_03_independence_path }
		add_country_modifier = {
			name = athenian_mission_04_independence_path
			duration = 10950
		}
	}
	else = {
		add_country_modifier = {
			name = athenian_mission_01_independence_path
			duration = 10950
		}
	}
}


gm_1_bartering_portrait_effect = {
	if = {
		limit = {
			exists = scope:gm_1_bartering_scope_2
			NOT = { scope:gm_1_bartering_scope_2.owner = scope:gm_1_bartering_scope_1.owner }
		}
		scope:gm_1_bartering_scope_2.owner.current_ruler = { save_scope_as = gm_1_barter_portrait_scope_2 }
	}
	else_if = { 
		limit = {
			exists = scope:gm_1_bartering_scope_3
			NOT = { scope:gm_1_bartering_scope_3.owner = scope:gm_1_bartering_scope_1.owner }
		}
		scope:gm_1_bartering_scope_3.owner.current_ruler = { save_scope_as = gm_1_barter_portrait_scope_2 }
	}
	else_if = { 
		limit = {
			exists = scope:gm_1_bartering_scope_4
			NOT = { scope:gm_1_bartering_scope_4.owner = scope:gm_1_bartering_scope_1.owner }
		}
		scope:gm_1_bartering_scope_4.owner.current_ruler = { save_scope_as = gm_1_barter_portrait_scope_2 }
	}
	else_if = { 
		limit = {
			exists = scope:gm_1_bartering_scope_5
			NOT = { scope:gm_1_bartering_scope_5.owner = scope:gm_1_bartering_scope_1.owner }
		}
		scope:gm_1_bartering_scope_5.owner.current_ruler = { save_scope_as = gm_1_barter_portrait_scope_2 }
	}
	else_if = { 
		limit = {
			exists = scope:gm_1_bartering_scope_6
			NOT = { scope:gm_1_bartering_scope_6.owner = scope:gm_1_bartering_scope_1.owner }
		}
		scope:gm_1_bartering_scope_6.owner.current_ruler = { save_scope_as = gm_1_barter_portrait_scope_2 }
	}
	if = {
		limit = {
			exists = scope:gm_1_bartering_scope_3
			NOR = { 
				scope:gm_1_bartering_scope_3.owner = scope:gm_1_bartering_scope_1.owner
				scope:gm_1_bartering_scope_3.owner = scope:gm_1_bartering_scope_2.owner
			}
		}
		scope:gm_1_bartering_scope_3.owner.current_ruler = { save_scope_as = gm_1_barter_portrait_scope_3 }
	}
	else_if = {
		limit = {
			exists = scope:gm_1_bartering_scope_4
			NOR = { 
				scope:gm_1_bartering_scope_4.owner = scope:gm_1_bartering_scope_1.owner
				scope:gm_1_bartering_scope_4.owner = scope:gm_1_bartering_scope_2.owner
			}
		}
		scope:gm_1_bartering_scope_4.owner.current_ruler = { save_scope_as = gm_1_barter_portrait_scope_3 }
	}
	else_if = {
		limit = {
			exists = scope:gm_1_bartering_scope_5
			NOR = { 
				scope:gm_1_bartering_scope_5.owner = scope:gm_1_bartering_scope_1.owner
				scope:gm_1_bartering_scope_5.owner = scope:gm_1_bartering_scope_2.owner
			}
		}
		scope:gm_1_bartering_scope_5.owner.current_ruler = { save_scope_as = gm_1_barter_portrait_scope_3 }
	}
	else_if = {
		limit = {
			exists = scope:gm_1_bartering_scope_6
			NOR = { 
				scope:gm_1_bartering_scope_6.owner = scope:gm_1_bartering_scope_1.owner
				scope:gm_1_bartering_scope_6.owner = scope:gm_1_bartering_scope_2.owner
			}
		}
		scope:gm_1_bartering_scope_6.owner.current_ruler = { save_scope_as = gm_1_barter_portrait_scope_3 }
	}
}

gm_1_barter_territory_effect = {
	custom_tooltip = me_greek_1_black_sea.6.tt
    root = {
	    change_variable = {
	    	name = gm_bartering_tracker
	    	add = 3
	    }
	}
}

gm_1_barter_territory_scope_effect = {
	save_scope_as = gm_1_barter_target_territory
	owner = { 
		trigger_event = { 
			id = me_greek_1_black_sea.7 
			days = { 5 10 }
		}
	}
}

gm_1_colony_scope_effect = {
	save_scope_as = gm_1_colony_target_scope
	trigger_event = { 
		id = me_greek_1_black_sea.19
		days = { 5 10 }
	}
}

gm_1_colony_option_effect = {
	custom_tooltip = me_greek_1_black_sea.18.tt
    root = {
	    change_variable = {
	    	name = gm_colony_tracker
	    	add = 3
	    }
	}
}

me_gre_hellenic_list_startup_effect = {
	hidden_effect = {
		gm_1_list_effect = yes
		random_list = {
			1 = {
				trigger = {
					NAND = {
						owns_or_subject_owns = 207
						owns_or_subject_owns = 1812
						owns_or_subject_owns = 1807
						owns_or_subject_owns = 1734
					}
					OR = {
						p:207 = { control_range = root }
						p:1812 = { control_range = root }
						p:1807 = { control_range = root }
						p:1734 = { control_range = root }
					}
				}
				modifier = {
					factor = 15
					capital_scope = { is_in_region = taurica_region }
				}
				set_variable = { # Khersonesos path
					name = gm_1_path
					value = 1
				}
			}
			1 = {
				trigger = {
					NAND = {
						owns_or_subject_owns = 4549
						owns_or_subject_owns = 4544
						owns_or_subject_owns = 4538
						owns_or_subject_owns = 4536
					}
					OR = {
						p:4549 = { control_range = root }
						p:4544 = { control_range = root }
						p:4538 = { control_range = root }
						p:4536 = { control_range = root }
					}
				}
				modifier = {
					factor = 15
					capital_scope = { is_in_region = bithynia_region }
				}
				set_variable = { # Bithynia path
					name = gm_1_path
					value = 2
				}
			}
			1 = {
				trigger = {
					NAND = {
						owns_or_subject_owns = 4513
						owns_or_subject_owns = 4526
						owns_or_subject_owns = 4529
						owns_or_subject_owns = 4522
					}
					OR = {
						p:4513 = { control_range = root }
						p:4526 = { control_range = root }
						p:4529 = { control_range = root }
						p:4522 = { control_range = root }
					}
				}
				modifier = {
					factor = 15
					capital_scope = { is_in_area = olbia_area }
				}
				set_variable = { # Olbia path
					name = gm_1_path
					value = 3
				}
			}
			1 = {
				trigger = {
					NAND = {
						owns_or_subject_owns = 1720
						owns_or_subject_owns = 1725
						owns_or_subject_owns = 1730
						owns_or_subject_owns = 1738
					}
					OR = {
						p:1720 = { control_range = root }
						p:1725 = { control_range = root }
						p:1730 = { control_range = root }
						p:1738 = { control_range = root }
					}
				}
				modifier = {
					factor = 15
					capital_scope = { is_in_region = colchis_region }
				}
				set_variable = { # Colchis path
					name = gm_1_path
					value = 4
				}
			}
		}
	}
}

gm_1_list_effect = {
	region:taurica_region = {
		every_region_province = {
			limit = { is_port = yes }
			add_to_list = gm_1_list
		}
	}
	region:colchis_region = {
		every_region_province = {
			limit = { is_port = yes } 
			add_to_list = gm_1_list
		}
	}
	region:sarmatia_europea_region = {
		every_region_province = {
			limit = { 
				is_port = yes
			} 
			add_to_list = gm_1_list
		}
	}
	area:haemimontus_area  = {
		every_area_province = {
			limit = { is_port = yes } 
			add_to_list = gm_1_list
		}
	}
	area:moesia_orientalis_area  = {
		every_area_province = {
			limit = { is_port = yes } 
			add_to_list = gm_1_list
		}
	}
	area:scythia_area  = {
		every_area_province = {
			limit = { is_port = yes } 
			add_to_list = gm_1_list
		}
	}
	area:machelonia_area = {
		every_area_province = {
			limit = { is_port = yes }
			add_to_list = gm_1_list
		}
	}
	area:paphlagonia_inferior_area = {
		every_area_province = {
			limit = { is_port = yes }
			add_to_list = gm_1_list
		}
	}
	area:heracleotis_area = {
		every_area_province = {
			limit = { is_port = yes }
			add_to_list = gm_1_list
		}
	}
	area:bithynia_inferior_area = {
		every_area_province = {
			limit = { is_port = yes }
			add_to_list = gm_1_list
		}
	}
	area:bithynia_area = {
		every_area_province = {
			limit = { 
				is_port = yes
				NOR = {
					province_id = 248
				}
			}
			add_to_list = gm_1_list
		}
	}
	area:europa_area = {
		every_area_province = {
			limit = { 
				is_port = yes
				NOR = {
					province_id = 350
					province_id = 347
				}
			}
			add_to_list = gm_1_list
		}
	}
}


athenian_mission_01_variable_cleanup_effect = {
	if = {
		limit = {
			has_variable = athenian_mission_01_task_4_aborted
		}
		remove_variable = athenian_mission_01_task_4_aborted
	}
}

me_gre_1_3_effect = {
	if = {
		limit = {
			owns_or_subject_owns = 1453
			trigger_if = {
				limit = { is_ai = no }
				p:1453 = {
					has_city_status = yes
					num_of_fortress_building >= 2
				}
				OR = {
					p:1453.total_population >= p:240.total_population
					p:240 = {
						OR = {
							has_city_status = no
							num_of_fortress_building < 2
						}
					}
				}
				OR = {
					p:1453.total_population >= p:241.total_population
					p:241 = {
						OR = {
							has_city_status = no
							num_of_fortress_building < 2
						}
					}
				}
			}
			trigger_else = {
				OR = {
					p:1453 = { has_city_status = yes }
					can_pay_price = price_found_city
				}
			}
		}
		ai_build_city_pay_price_effect = { CITY = p:1453 }
		p:1453 = {
			if = {
				limit = {
					ROOT = { is_ai = yes }
					num_of_fortress_building < 1
				}
				if = {
					limit = { free_building_slots < 1 }
					destroy_building_effect = yes
				}
				add_building_level = fortress_building
			}
			create_state_pop = freemen
			add_province_modifier = {
				name = me_gre_1_3_pmod
				duration = 7300 # 20 years
			}
		}
	}
	else_if = {
		limit = {
			owns_or_subject_owns = 240
			trigger_if = {
				limit = { is_ai = no }
				p:240 = {
					has_city_status = yes
					num_of_fortress_building >= 2
				}
				OR = {
					p:240.total_population >= p:1453.total_population
					p:1453 = {
						OR = {
							has_city_status = no
							num_of_fortress_building < 2
						}
					}
				}
				OR = {
					p:240.total_population >= p:241.total_population
					p:241 = {
						OR = {
							has_city_status = no
							num_of_fortress_building < 2
						}
					}
				}
			}
		}
		ai_build_city_pay_price_effect = { CITY = p:240 }
		p:240 = {
			if = {
				limit = {
					ROOT = { is_ai = yes }
					num_of_fortress_building < 1
				}
				if = {
					limit = { free_building_slots < 1 }
					destroy_building_effect = yes
				}
				add_building_level = fortress_building
			}
			create_state_pop = freemen
			add_province_modifier = {
				name = me_gre_1_3_pmod
				duration = 7300 # 20 years
			}
		}
	}
	else_if = {
		limit = {
			owns_or_subject_owns = 241
			trigger_if = {
				limit = { is_ai = no }
				p:1453 = {
					has_city_status = yes
					num_of_fortress_building >= 2
				}
				OR = {
					p:241.total_population >= p:1453.total_population
					p:1453 = {
						OR = {
							has_city_status = no
							num_of_fortress_building < 2
						}
					}
				}
				OR = {
					p:241.total_population >= p:240.total_population
					p:240 = {
						OR = {
							has_city_status = no
							num_of_fortress_building < 2
						}
					}
				}
			}
		}
		ai_build_city_pay_price_effect = { CITY = p:241 }
		p:241 = {
			if = {
				limit = {
					ROOT = { is_ai = yes }
					num_of_fortress_building < 1
				}
				if = {
					limit = { free_building_slots < 1 }
					destroy_building_effect = yes
				}
				add_building_level = fortress_building
			}
			create_state_pop = freemen
			add_province_modifier = {
				name = me_gre_1_3_pmod
				duration = 7300 # 20 years
			}
		}
	}
	else = { custom_tooltip = greek_1_3_reward_tt }
}

athenian_mission_02_variable_cleanup_effect = {
	if = {
		limit = {
			has_variable = attican_minerals_enabled
		}
		remove_variable = attican_minerals_enabled
	}
	if = {
		limit = {
			has_variable = attica_for_athens_disabled
		}
		remove_variable = attica_for_athens_disabled
	}
	if = {
		limit = {
			has_variable = athenian_mission_02_attica_task_3_effect_1
		}
		remove_variable = athenian_mission_02_attica_task_3_effect_1
	}
}

athenian_mission_04_variable_cleanup_effect = {
	if = {
		limit = {
			has_variable = athenian_mission_04_ionia_route
		}
		remove_variable = athenian_mission_04_ionia_route
	}
	if = {
		limit = {
			has_variable = athenian_mission_04_europa_route
		}
		remove_variable = athenian_mission_04_europa_route
	}
}

me_gre_2_3_effect = {
	scope:me_gre_2_3_scope = {
        create_country = {
            save_scope_as = me_gre_2_3_tag_scope
        }
        create_state_pop = citizen
        create_state_pop = freemen
    }
    if = {
        limit = { government = plutocratic_republic }
        scope:me_gre_2_3_tag_scope = { change_government = plutocratic_republic }
    }
    else_if = {
        limit = { government = aristocratic_republic }
        scope:me_gre_2_3_tag_scope = { change_government = aristocratic_republic }
    }
    else_if = {
        limit = { government = theocratic_republic }
        scope:me_gre_2_3_tag_scope = { change_government = theocratic_republic }
    }
    else_if = {
        limit = { government = oligarchic_republic }
        scope:me_gre_2_3_tag_scope = { change_government = oligarchic_republic }
    }
    else_if = {
        limit = { government = democratic_republic }
        scope:me_gre_2_3_tag_scope = { change_government = democratic_republic }
    }
    scope:me_gre_2_3_tag_scope = {
    	add_treasury = { value = 50 }
        create_character = {
            culture = scope:me_gre_2_3_tag_scope.culture
            religion = scope:me_gre_2_3_tag_scope.religion
            age = 34
            female = no
            no_traits = yes
            add_trait = corrupt
            add_trait = submissive
            add_corruption = 20
            save_scope_as = me_gre_2_3_scope_leader
        }
        set_as_ruler = scope:me_gre_2_3_scope_leader  
    }
}

me_gre_2_variable_clearer_effect = {
	remove_variable = gm_2_greek_country_flag
	if = {
		limit = { has_variable = me_gre_2_7_block }
		remove_variable = me_gre_2_7_block
	}
	if = {
		limit = { has_variable = me_gre_2_18_block }
		remove_variable = me_gre_2_18_block
	}
	if = {
		limit = { has_variable = me_gre_2_14_block }
		remove_variable = me_gre_2_14_block
	}
	if = {
		limit = { has_variable = me_gre_2_lib_block }
		remove_variable = me_gre_2_lib_block
	}
	if = {
		limit = { has_variable = me_gre_2_convince_flag }
		remove_variable = me_gre_2_convince_flag
	}
	if = {
		limit = { has_variable = me_gre_2_final_choice_flag }
		remove_variable = me_gre_2_final_choice_flag
	}
}

me_gre_2_regional_subjects_effect = {
	if = {
		limit = {
			any_subject = {
				country_culture_group = hellenic
				capital_scope.area = root.capital_scope.area
			}
		}
		every_subject = {
			limit = {
				country_culture_group = hellenic
				capital_scope.area = root.capital_scope.area
			}
			every_owned_province = { set_owned_by = root }
		}
	}
	if = {
        limit = { 
            NOT = {
                capital_scope = { is_in_area = central_greece_area }
            }
        }
        p:418 = {
            create_country = {
                name = {
                    name = "ATTICA"
                    adjective = "ATTICA_ADJ"
                }
                save_scope_as = attic_league_scope
                add_treasury = 100
                change_country_color = ocean_blue
                set_primary_culture = athenian
                me_gre_2_change_gov_effect = yes
                add_country_modifier = { name = me_gre_2_self_government_cmod }
            }
        }
        area:central_greece_area = {
            every_area_province = { set_conquered_by = scope:attic_league_scope }
        }
        root = {
	        make_subject = {
	            target = scope:attic_league_scope
	            type = feudatory
	        }
	    }
    }
    if = {
        limit = { 
            NOT = {
                capital_scope = { is_in_area = arcadia_area }
            }
        }
        p:440 = {
            create_country = {
                name = {
                    name = "ARCADIA"
                    adjective = "ARCADIA_ADJ"
                }
                save_scope_as = arcadian_league_scope
                add_treasury = 100
                change_country_color = theban_green
                set_primary_culture = arcadian
                me_gre_2_change_gov_effect = yes
                add_country_modifier = { name = me_gre_2_self_government_cmod }
            }
        }
        area:arcadia_area = {
            every_area_province = { set_conquered_by = scope:arcadian_league_scope }
        }
        root = {
	        make_subject = {
	            target = scope:arcadian_league_scope
	            type = feudatory
	        }
	    }
    }
    if = {
        limit = { 
            NOT = {
                capital_scope = { is_in_area = south_peleponnesos_area }
            }
        }
        p:427 = {
            create_country = {
                name = {
                    name = "PELOPONNESIA"
                    adjective = "PELOPONNESIA_ADJ"
                }
                save_scope_as = peloponnesian_league_scope
                add_treasury = 100
                change_country_color = samnite_red
                set_primary_culture = peloponnesian
                me_gre_2_change_gov_effect = yes
                add_country_modifier = { name = me_gre_2_self_government_cmod }
            }
        }
        area:south_peleponnesos_area = {
            every_area_province = { set_conquered_by = scope:peloponnesian_league_scope }
        }
        root = {
	        make_subject = {
	            target = scope:peloponnesian_league_scope
	            type = feudatory
	        }
	    }
    }
    if = {
        limit = { 
            NOT = {
                capital_scope = { is_in_area = achaea_area }
            }
        }
        p:446 = {
            create_country = {
                name = {
                    name = "ACHAEA"
                    adjective = "ACHAEA_ADJ"
                }
                save_scope_as = achean_league_scope
                add_treasury = 100
                change_country_color = achaea_color
                set_primary_culture = achaean
                me_gre_2_change_gov_effect = yes
                add_country_modifier = { name = me_gre_2_self_government_cmod }
            }
        }
        area:achaea_area = {
            every_area_province = { set_conquered_by = scope:achean_league_scope }
        }
        root = {
	        make_subject = {
	            target = scope:achean_league_scope
	            type = feudatory
	        }
	    }
    }
    if = {
        limit = { 
            NOT = {
                capital_scope = { is_in_area = boeotia_area }
            }
        }
        p:426 = {
            create_country = {
                name = {
                    name = "BOEOTIA"
                    adjective = "BOEOTIA_ADJ"
                }
                save_scope_as = boeotian_league_scope
                add_treasury = 100
                change_country_color = blood_red
                set_primary_culture = boeotian
                me_gre_2_change_gov_effect = yes
            	add_country_modifier = { name = me_gre_2_self_government_cmod }
            }
        }
        area:boeotia_area = {
            every_area_province = { set_conquered_by = scope:boeotian_league_scope }
        }
        root = {
	        make_subject = {
	            target = scope:boeotian_league_scope
	            type = feudatory
	        }
	    }
    }
    if = {
        limit = { 
            NOT = {
                capital_scope = { is_in_area = euboea_area }
            }
        }
        p:407 = {
            create_country = {
                name = {
                    name = "EUBOEA"
                    adjective = "EUBOEA_ADJ"
                }
                save_scope_as = euboean_league_scope
                add_treasury = 100
                change_country_color = euboean_blue
                set_primary_culture = euboean
                me_gre_2_change_gov_effect = yes
                add_country_modifier = { name = me_gre_2_self_government_cmod }
            }
        }
        area:euboea_area = {
            every_area_province = { set_conquered_by = scope:euboean_league_scope }
        }
        root = {
	        make_subject = {
	            target = scope:euboean_league_scope
	            type = feudatory
	        }
	    }
    }
    if = {
        limit = { 
            NOT = {
                capital_scope = { is_in_area = aegean_islands_area }
            }
        }
        p:263 = {
            create_country = {
                name = {
                    name = "AEGEA"
                    adjective = "AEGEA_ADJ"
                }
                save_scope_as = aegean_league_scope
                add_treasury = 100
                change_country_color = sun_yellow
                set_primary_culture = aegean
                me_gre_2_change_gov_effect = yes
                add_country_modifier = { name = me_gre_2_self_government_cmod }
            }
        }
        area:aegean_islands_area = {
            every_area_province = { set_conquered_by = scope:aegean_league_scope }
        }
        root = {
	        make_subject = {
	            target = scope:aegean_league_scope
	            type = feudatory
	        }
	    }
    }
    if = {
        limit = { 
            NOT = {
                capital_scope = { is_in_area = aetolia_area }
            }
        }
        p:456 = {
            create_country = {
                name = {
                    name = "AETOLIA"
                    adjective = "AETOLIA_ADJ"
                }
                save_scope_as = aetolian_league_scope
                add_treasury = 100
                change_country_color = pure_white
                set_primary_culture = aetolian
                me_gre_2_change_gov_effect = yes
                add_country_modifier = { name = me_gre_2_self_government_cmod }
            }
        }
        area:aetolia_area = {
            every_area_province = { set_conquered_by = scope:aetolian_league_scope }
        }
        root = {
	        make_subject = {
	            target = scope:aetolian_league_scope
	            type = feudatory
	        }
	    }
    }
    if = {
        limit = { 
            NOT = {
                capital_scope = { is_in_area = thessaly_area }
            }
        }
        p:389 = {
            create_country = {
                name = {
                    name = "THESSALY"
                    adjective = "THESSALY_ADJ"
                }
                save_scope_as = thessalian_league_scope
                add_treasury = 100
                change_country_color = phoenicia_color
                set_primary_culture = thessalian
                me_gre_2_change_gov_effect = yes
                add_country_modifier = { name = me_gre_2_self_government_cmod }
            }
        }
        area:thessaly_area = {
            every_area_province = { set_conquered_by = scope:thessalian_league_scope }
        }
        root = {
	        make_subject = {
	            target = scope:thessalian_league_scope
	            type = feudatory
	        }
	    }
    }
}

gm_3_foreign_aid_effect = {
	custom_tooltip = me_greek_3_italiote.12.tt
    root = {
	    change_variable = {
	    	name = gm_foreign_aid_tracker
	    	add = 3
	    }
	}
}

gm_3_foreign_aid_scope_effect = {
	save_scope_as = gm_3_foreign_aid_target
	if = {
		limit = { is_ai = no }
		random_list = {
			2 = {
				scope:gm_3_greek_scope = { 
					set_variable = {
						name = gm_foreign_aid_response
						value = 1
					}
				}
				modifier = {
					factor = 1.5
					scope:gm_3_greek_scope = { is_ai = no }
				}
				modifier = {
					factor = 1.5
					opinion = { target = scope:gm_3_greek_scope value > 50 }
				}
			}
			1 = {
				scope:gm_3_greek_scope = { 
					set_variable = {
						name = gm_foreign_aid_response
						value = 2
					}
				}
				modifier = {
					factor = 1.5
					opinion = { target = scope:gm_3_greek_scope value > 0 }
				}
			}
			3 = {
				scope:gm_3_greek_scope = { 
					set_variable = {
						name = gm_foreign_aid_response
						value = 3
					}
				}
				set_variable = {
					name = me_gre_3_foreign_aid_block
					days = 120
				}
				modifier = {
					factor = 1.5
					opinion = { target = scope:gm_3_greek_scope value < 0 }
				}
				modifier = {
					factor = 1.5
					scope:gm_3_greek_scope = { is_ai = yes }
				}
			}
		}
		root = {
			trigger_event = { 
				id = me_greek_3_italiote.14 
				days = { 20 30 }
			}
		}
	}
	else = {
		trigger_event = { 
			id = me_greek_3_italiote.13 
			days = { 5 10 }
		}
	}
}

me_gre_3_foreign_aid_scope_effect = {
	if = {
		limit = { exists = scope:gm_3_7_scope_1 }
		random_country = {
			limit = { this = scope:gm_3_7_scope_1 }
			clear_saved_scope = gm_3_7_scope_1
		}
	}
	if = {
		limit = { exists = scope:gm_3_7_scope_2 }
		random_country = {
			limit = { this = scope:gm_3_7_scope_2 }
			clear_saved_scope = gm_3_7_scope_2
		}
	}
	if = {
		limit = { exists = scope:gm_3_7_scope_3 }
		random_country = {
			limit = { this = scope:gm_3_7_scope_3 }
			clear_saved_scope = gm_3_7_scope_3
		}
	}
	if = {
		limit = { exists = scope:gm_3_7_scope_4 }
		random_country = {
			limit = { this = scope:gm_3_7_scope_4 }
			clear_saved_scope = gm_3_7_scope_4
		}
	}
	if = {
		limit = { exists = scope:gm_3_7_scope_5 }
		random_country = {
			limit = { this = scope:gm_3_7_scope_5 }
			clear_saved_scope = gm_3_7_scope_5
		}
	}
	if = {
		limit = { exists = scope:gm_3_7_scope_6 }
		random_country = {
			limit = { this = scope:gm_3_7_scope_6 }
			clear_saved_scope = gm_3_7_scope_6
		}
	}
	while = {	# Save up to 6
		count = 6
		limit = {
			any_country = {
				capital_scope = {
					OR = {
						is_in_region = central_italy_region
						is_in_region = magna_graecia_region
						is_in_region = greece_region
					}
				}
				country_culture_group = hellenic
				opinion = { target = root value > -25 }
				country_population > root.country_population
				is_subject = no
				NOR = {
					has_variable = me_gre_3_foreign_aid_block
					war_with = root
					this = root
					AND = {
						exists = scope:gm_3_7_scope_1
						this = scope:gm_3_7_scope_1
					}
					AND = {
						exists = scope:gm_3_7_scope_2
						this = scope:gm_3_7_scope_2
					}
					AND = {
						exists = scope:gm_3_7_scope_3
						this = scope:gm_3_7_scope_3
					}
					AND = {
						exists = scope:gm_3_7_scope_4
						this = scope:gm_3_7_scope_4
					}
					AND = {
						exists = scope:gm_3_7_scope_5
						this = scope:gm_3_7_scope_5
					}
					AND = {
						exists = scope:gm_3_7_scope_6
						this = scope:gm_3_7_scope_6
					}
				}
			}
			NAND = {
				exists = scope:gm_3_7_scope_1
				exists = scope:gm_3_7_scope_2
				exists = scope:gm_3_7_scope_3
				exists = scope:gm_3_7_scope_4
				exists = scope:gm_3_7_scope_5
				exists = scope:gm_3_7_scope_6
			}
		}
		ordered_country = {
			limit = {
				capital_scope = {
					OR = {
						is_in_region = central_italy_region
						is_in_region = magna_graecia_region
						is_in_region = greece_region
					}
				}
				country_culture_group = hellenic
				opinion = { target = root value > -25 }
				country_population > root.country_population
				NOR = {
					war_with = root
					AND = {
						exists = scope:gm_3_7_scope_1
						this = scope:gm_3_7_scope_1
					}
					AND = {
						exists = scope:gm_3_7_scope_2
						this = scope:gm_3_7_scope_2
					}
					AND = {
						exists = scope:gm_3_7_scope_3
						this = scope:gm_3_7_scope_3
					}
					AND = {
						exists = scope:gm_3_7_scope_4
						this = scope:gm_3_7_scope_4
					}
					AND = {
						exists = scope:gm_3_7_scope_5
						this = scope:gm_3_7_scope_5
					}
					AND = {
						exists = scope:gm_3_7_scope_6
						this = scope:gm_3_7_scope_6
					}
				}
			}
			order_by = country_population
			if = {
				limit = {
					NOT = { exists = scope:gm_3_7_scope_1 }
				}
				save_scope_as = gm_3_7_scope_1
			}
			else_if = {
				limit = {
					exists = scope:gm_3_7_scope_1
					NOR = { 
						exists = scope:gm_3_7_scope_2
						this = scope:gm_3_7_scope_1
					}
				}
				save_scope_as = gm_3_7_scope_2
			}
			else_if = {
				limit = {
					exists = scope:gm_3_7_scope_1
					exists = scope:gm_3_7_scope_2
					NOR = { 
						exists = scope:gm_3_7_scope_3
						this = scope:gm_3_7_scope_1
						this = scope:gm_3_7_scope_2
					}
				}
				save_scope_as = gm_3_7_scope_3
			}
			else_if = {
				limit = {
					exists = scope:gm_3_7_scope_1
					exists = scope:gm_3_7_scope_2
					exists = scope:gm_3_7_scope_3
					NOR = { 
						exists = scope:gm_3_7_scope_4
						this = scope:gm_3_7_scope_1
						this = scope:gm_3_7_scope_2
						this = scope:gm_3_7_scope_3
					}
				}
				save_scope_as = gm_3_7_scope_4
			}
			else_if = {
				limit = {
					exists = scope:gm_3_7_scope_1
					exists = scope:gm_3_7_scope_2
					exists = scope:gm_3_7_scope_3
					exists = scope:gm_3_7_scope_4
					NOR = { 
						exists = scope:gm_3_7_scope_5
						this = scope:gm_3_7_scope_1
						this = scope:gm_3_7_scope_2
						this = scope:gm_3_7_scope_3
						this = scope:gm_3_7_scope_4
					}
				}
				save_scope_as = gm_3_7_scope_5
			}
			else_if = {
				limit = {
					exists = scope:gm_3_7_scope_1
					exists = scope:gm_3_7_scope_2
					exists = scope:gm_3_7_scope_3
					exists = scope:gm_3_7_scope_4
					exists = scope:gm_3_7_scope_5
					NOR = { 
						exists = scope:gm_3_7_scope_6
						this = scope:gm_3_7_scope_1
						this = scope:gm_3_7_scope_2
						this = scope:gm_3_7_scope_3
						this = scope:gm_3_7_scope_4
						this = scope:gm_3_7_scope_5
					}
				}
				save_scope_as = gm_3_7_scope_6
			}
		}
	}
}

me_gre_4_hellenic_list_startup_effect = {
	hidden_effect = {
		gm_4_lib_list_effect = yes # Saves ports owned by barbarians to a list
		gm_4_list_effect = yes
		random_list = {
			1 = {
				trigger = {
					NAND = {
						owns_or_subject_owns = 3543
						owns_or_subject_owns = 2325
						owns_or_subject_owns = 2319
						owns_or_subject_owns = 2256
					}
					OR = {
						p:3543 = { control_range = root }
						p:2325 = { control_range = root }
						p:2319 = { control_range = root }
						p:2256 = { control_range = root }
					}
				}
				modifier = {
					factor = 100
					capital_scope = { is_in_region = transalpine_gaul_region }
				}
				set_variable = { # Gaul path
					name = gm_4_path
					value = 1
				}
			}
			1 = {
				trigger = {
					NAND = {
						owns_or_subject_owns = 1240
						owns_or_subject_owns = 1000
						owns_or_subject_owns = 1006
						owns_or_subject_owns = 1012
					}
					OR = {
						p:1240 = { control_range = root }
						p:1000 = { control_range = root }
						p:1006 = { control_range = root }
						p:1012 = { control_range = root }
					}
				}
				modifier = {
					factor = 100
					capital_scope = { is_in_region = tarraconensis_region }
				}
				set_variable = { # North East Spain path
					name = gm_4_path
					value = 2
				}
			}
			1 = {
				trigger = {
					NAND = {
						owns_or_subject_owns = 1032
						owns_or_subject_owns = 1031
						owns_or_subject_owns = 1033
						owns_or_subject_owns = 1036
					}
					OR = {
						p:1032 = { control_range = root }
						p:1031 = { control_range = root }
						p:1033 = { control_range = root }
						p:1036 = { control_range = root }
					}
				}
				modifier = {
					factor = 100
					capital_scope = { is_in_region = contestania_region }
				}
				set_variable = { # South East Spain path
					name = gm_4_path
					value = 3
				}
			}
			1 = {
				trigger = {
					NAND = {
						owns_or_subject_owns = 1342
						owns_or_subject_owns = 1334
						owns_or_subject_owns = 1362
						owns_or_subject_owns = 1347
					}
					OR = {
						p:1342 = { control_range = root }
						p:1334 = { control_range = root }
						p:1362 = { control_range = root }
						p:1347 = { control_range = root }
					}
				}
				modifier = {
					factor = 100
					capital_scope = { is_in_region = baetica_region }
				}
				set_variable = { # South path
					name = gm_4_path
					value = 4
				}
			}
			1 = {
				trigger = {
					NAND = {
						owns_or_subject_owns = 3504
						owns_or_subject_owns = 3515
						owns_or_subject_owns = 96
						owns_or_subject_owns = 3481
					}
					OR = {
						p:3504 = { control_range = root }
						p:3515 = { control_range = root }
						p:96 = { control_range = root }
						p:3481 = { control_range = root }
					}
				}
				modifier = {
					factor = 100
					capital_scope = { 
						OR = {	
							is_in_region = magna_graecia_region 
							is_in_region = central_italy_region 
						}
					}
				}
				set_variable = { # South path
					name = gm_4_path
					value = 5
				}
			}
		}
	}
}

gm_4_lib_list_effect = {
	region:transalpine_gaul_region = {
		every_region_province = {
			limit = {
				OR = {
					province_id = 3453
					province_id = 3541
					province_id = 3540
					province_id = 3517
					province_id = 2325
					province_id = 2318
					province_id = 2260
					province_id = 1815
					province_id = 1734
					province_id = 1793
				}
				has_owner = yes
				owner = { 
					NOR = {
						this = root
						country_culture_group = hellenic 
					}
				}
			}
			add_to_list = gm_4_hellenic_liberation_list
		}
	}
	region:tarraconensis_region  = {
		every_region_province = {
			limit = {
				OR = {
					province_id = 1001
					province_id = 1000
					province_id = 1006
					province_id = 1730
					province_id = 1725
					province_id = 1012
				}
				has_owner = yes
				owner = { 
					NOR = {
						this = root
						country_culture_group = hellenic 
					}
				}
			}
			add_to_list = gm_4_hellenic_liberation_list
		}
	}
	region:contestania_region = {
		every_region_province = {
			limit = {
				OR = {
					province_id = 1032
					province_id = 1031
					province_id = 1037
					province_id = 1033
					province_id = 1035
				}
				has_owner = yes
				owner = { 
					NOR = {
						this = root
						country_culture_group = hellenic 
					}
				}
			}
			add_to_list = gm_4_hellenic_liberation_list
		}
	}
	region:baetica_region = {
		every_region_province = {
			limit = {
				OR = {
					province_id = 1366
					province_id = 1342
					province_id = 1335
					province_id = 1283
				}
				has_owner = yes
				owner = { 
					NOR = {
						this = root
						country_culture_group = hellenic 
					}
				}
			}
			add_to_list = gm_4_hellenic_liberation_list
		}
	}
	area:sardinia_septentrionalis = {
		every_area_province = {
			limit = {
				province_id = 3504
				has_owner = yes
				owner = { 
					NOR = {
						this = root
						country_culture_group = hellenic 
					}
				}
			}
			add_to_list = gm_4_hellenic_liberation_list
		}
	}
	area:west_sicily_area = {
		every_area_province = {
			limit = {
				province_id = 96
				has_owner = yes
				owner = { 
					NOR = {
						this = root
						country_culture_group = hellenic 
					}
				}
			}
			add_to_list = gm_4_hellenic_liberation_list
		}
	}
}

gm_4_list_effect = {
	region:transalpine_gaul_region = {
		every_region_province = {
			limit = { is_port = yes }
			add_to_list = gm_4_list
		}
	}
	area:indiketia_area  = {
		every_area_province = {
			limit = { is_port = yes } 
			add_to_list = gm_4_list
		}
	}
	area:cessetania_area  = {
		every_area_province = {
			limit = { is_port = yes } 
			add_to_list = gm_4_list
		}
	}
	area:ilercavonia_area  = {
		every_area_province = {
			limit = { is_port = yes } 
			add_to_list = gm_4_list
		}
	}
	region:contestania_region = {
		every_region_province = {
			limit = { is_port = yes } 
			add_to_list = gm_4_list
		}
	}
	region:baetica_region = {
		every_region_province = {
			limit = { 
				is_port = yes
			} 
			add_to_list = gm_4_list
		}
	}
	area:corsica_area = {
		every_area_province = {
			limit = { is_port = yes }
			add_to_list = gm_4_list
		}
	}
}

me_gre_4_3_effect = {
	if = {
		limit = {
			owns_or_subject_owns = 1347
			p:1347 = {
				trigger_if = {
					limit = {
						ROOT = { is_ai = no }
					}
					has_city_status = yes
					num_of_fortress_building >= 2
					num_of_commerce_building >= 2
				}
			}
			OR = {
				p:1347.total_population >= p:3061.total_population
				p:3061 = {
					trigger_if = {
						limit = {
							ROOT = { is_ai = no }
						}
						OR = {
							has_city_status = no
							num_of_fortress_building < 2
							num_of_commerce_building < 2
						}
					}
				}
			}
		}
		p:1347 = {
			if = {
				limit = { has_city_status = no }
				set_city_status = city
			}
			create_state_pop = citizen
			add_province_modifier = {
				name = me_gre_4_3_pmod
				duration = 7300 # 20 years
			}
		}
	}
	else_if = {
		limit = {
			owns_or_subject_owns = 3061
			p:3061 = {
				trigger_if = {
					limit = {
						ROOT = { is_ai = no }
					}
					has_city_status = yes
					num_of_fortress_building >= 2
					num_of_commerce_building >= 2
				}
			}
			OR = {
				p:3061.total_population >= p:1347.total_population
				p:1347 = {
					trigger_if = {
						limit = {
							ROOT = { is_ai = no }
						}
						OR = {
							has_city_status = no
							num_of_fortress_building < 2
							num_of_commerce_building < 2
						}
					}
				}
			}
		}
		p:3061 = {
			if = {
				limit = { has_city_status = no }
				set_city_status = city
			}
			create_state_pop = citizen
			add_province_modifier = {
				name = me_gre_4_3_pmod
				duration = 7300 # 20 years
			}
		}
	}
	else = { custom_tooltip = greek_1_3_reward_tt }
}

gm_4_barter_territory_effect = {
	custom_tooltip = me_greek_4_west.6.tt
    root = {
	    change_variable = {
	    	name = gm_bartering_tracker
	    	add = 3
	    }
	}
}

gm_4_barter_territory_scope_effect = {
	save_scope_as = gm_4_barter_target_territory
	owner = { 
		trigger_event = { 
			id = me_greek_4_west.7 
			days = { 5 10 }
		}
	}
}

me_gre_new_markets_effect = {
	if = {
        limit = {
            NOT = { has_state_modifier = me_gre_1_7_smod }
        }
        add_state_modifier = {
            name = me_gre_1_7_smod
            duration = 3650 # 10 years
        }
    }
}

gm_4_colony_scope_effect = {
	save_scope_as = gm_4_colony_target_scope
	trigger_event = { 
		id = me_greek_4_west.19
		days = { 5 10 }
	}
}

gm_4_colony_option_effect = {
	custom_tooltip = me_greek_4_west.18.tt
    root = {
	    change_variable = {
	    	name = gm_colony_tracker
	    	add = 3
	    }
	}
}

mission_area_claim_effect = {
	every_area_province = {
		limit = {
			NOT = { owned_or_subject_owned = root }
		}
		add_claim = root
	}
}

mission_claim_area_effect = {
	if = {
		limit = {
			area:$AREA$ = {
				any_area_province = {
					NOT = { owned_or_subject_owned = root }
				}
			}
		}
		random_province = {
			limit = { is_in_area = $AREA$ }
			custom_tooltip = mission_claim_area_tooltip
		}
		area:$AREA$ = {
			hidden_effect = {
				every_area_province = {
					limit = {
						NOT = { owned_or_subject_owned = root }
					}
					add_claim = root
				}
			}
		}
	}
}

me_carthage_sicily_1_event_effect = {
	every_area_province = {
		limit = {
			owner = c:SYR
		}
		add_claim = root
	}
}

ant_01_frontier_meta_scope_effect = {
	random_state_province = {
        limit = {
            trigger_if = {
            	limit = {
            		any_neighbor_province = {
            			has_owner = yes
            			owner = {
            				OR = {
            					this = $OWNER$
            					is_subject_of = $OWNER$
            				}            				
            			}
            			trigger_if = {
				        	limit = { $OWNER$ = c:EGY }
				        	NOT = { is_in_region = greece_region }
				        }
            		}
            	}
	            any_neighbor_province = {
	                trigger_if = {
	                	limit = { owner = $OWNER$ }
	                	owner = $OWNER$
	                }
	                trigger_else_if = {
	                	limit = {
	                		owner = { is_subject_of = $OWNER$ }
	                	}
	                	owner = { is_subject_of = $OWNER$ }
	                }
	                trigger_if = {
			        	limit = { $OWNER$ = c:EGY }
			        	NOT = { is_in_region = greece_region }
			        }
	            }
	        }
        }
        weight = {
            modifier = {
                factor = 10
                has_province_rank = city
            }
            modifier = {
                factor = 10
                free_building_slots >= 1
            }
            modifier = {
                factor = 5
                terrain = desert
            }
            modifier = {
                factor = 10
                terrain = hills
            }
            modifier = {
                factor = 10
                terrain = marsh
            }
            modifier = {
                factor = 10
                terrain = forest
            }
            modifier = {
                factor = 50
                terrain = mountain
            }
            modifier = {
                factor = 20
                any_neighbor_province = {
                	count >= 5
                	is_uninhabitable = no
                	is_coastal = no
                }
            }
        }
        save_scope_as = ant_01_frontier_scope
        scope:me_antigonids_scope = {
	        set_variable = {
	        	name = ant_01_frontier_flag
	        	value = scope:ant_01_frontier_scope
	        }
	        set_variable = {
	        	name = ant_01_frontier_owner_flag
	        	value = $OWNER$
	        }
	    }
        show_as_tooltip = {
        	if = {
        		limit = { free_building_slots < 1 }
        		destroy_building_effect = yes
        	}
        	add_building_level = fortress_building
        	add_province_modifier = {
        		name = ant_01_7_pmod
        		duration = 7300
        	}
        }
    }
}

ant_01_9_save_ter_effect = {
	if = {
        limit = {
        	NOT = { exists = scope:ant_01_9_city_1_scope }
        }
        ordered_in_list = {
	        list = ant_01_9_ter_list
	        position = 0
	        save_scope_as = ant_01_9_city_1_scope
	    }
    }
    if = {
        limit = {
        	NOT = { exists = scope:ant_01_9_city_2_scope }
            any_in_list = {
                list = ant_01_9_ter_list
                count >= 2
            }
        }
        ordered_in_list = {
            list = ant_01_9_ter_list
            position = 1
            save_scope_as = ant_01_9_city_2_scope
        }
    }
    if = {
        limit = {
        	NOT = { exists = scope:ant_01_9_city_3_scope }
            any_in_list = {
                list = ant_01_9_ter_list
                count >= 3
            }
        }
        ordered_in_list = {
            list = ant_01_9_ter_list
            position = 2
            save_scope_as = ant_01_9_city_3_scope
        }
    }
    if = {
        limit = {
        	NOT = { exists = scope:ant_01_9_city_4_scope }
            any_in_list = {
                list = ant_01_9_ter_list
                count >= 4
            }
        }
        ordered_in_list = {
            list = ant_01_9_ter_list
            position = 3
            save_scope_as = ant_01_9_city_4_scope
        }
    }
}

me_ant_01_9_ter_effect = {
	save_scope_as = me_ant_01_9_ter_scope
	custom_tooltip = me_antigonid_1_vision.96.at
	change_variable = {
        name = me_ant_01_9_ter_pop_contributor
        add = antigonid_01_vision_9_ter_pop_proportion
    }
}

ant_01_9_dest_scope_effect = {
	if = {
        limit = {
        	NOT = { exists = scope:ant_01_9_dest_1_scope }
        }
        ordered_in_list = {
	        list = ant_01_9_dest_list
	        order_by = {
	        	value = 0
	        	subtract = total_population
	        }
	        position = 0
	        save_scope_as = ant_01_9_dest_1_scope
	    }
    }
    if = {
        limit = {
        	NOT = { exists = scope:ant_01_9_dest_2_scope }
            any_in_list = {
                list = ant_01_9_dest_list
                count >= 2
            }
        }
        ordered_in_list = {
            list = ant_01_9_dest_list
            order_by = {
	        	value = 0
	        	subtract = total_population
	        }
            position = 1
            save_scope_as = ant_01_9_dest_2_scope
        }
    }
    if = {
        limit = {
        	NOT = { exists = scope:ant_01_9_dest_3_scope }
            any_in_list = {
                list = ant_01_9_dest_list
                count >= 3
            }
        }
        ordered_in_list = {
            list = ant_01_9_dest_list
            order_by = {
	        	value = 0
	        	subtract = total_population
	        }
            position = 2
            save_scope_as = ant_01_9_dest_3_scope
        }
    }
    if = {
        limit = {
        	NOT = { exists = scope:ant_01_9_dest_4_scope }
            any_in_list = {
                list = ant_01_9_dest_list
                count >= 4
            }
        }
        ordered_in_list = {
            list = ant_01_9_dest_list
            order_by = {
	        	value = 0
	        	subtract = total_population
	        }
            position = 3
            save_scope_as = ant_01_9_dest_4_scope
        }
    }
}

ant_01_9_dest_effect = {
	save_scope_as = ant_01_9_dest_scope
	hidden_effect = {
		if = {
	        limit = {
	            ROOT = {
	            	any_subject = { has_variable = me_ant_01_9_sub_pop_contributor }
	            }
	        }
	        ROOT = {
		        every_subject = {
		            limit = { has_variable = me_ant_01_9_sub_pop_contributor }
		            while = {
		                count = this.var:me_ant_01_9_sub_pop_contributor
		                ordered_owned_province = {
		                    limit = {
		                        any_pops_in_province = {
		                        	pop_culture_group = hellenic
		                            NOR = { 
		                                pop_type = slaves
		                                pop_type = nobles
		                            }
		                        }
		                    }
		                    order_by = total_population
		                    ordered_pops_in_province = {
		                        limit = {
		                        	pop_culture_group = hellenic
		                            NOR = { 
		                                pop_type = slaves
		                                pop_type = nobles
		                            }
		                        }
		                        order_by = {
		                            value = 0
		                            subtract = pop_hapiness
		                        }
		                        move_pop = scope:ant_01_9_dest_scope
		                    }
		                }
		            }
		        }
		    }
	    }
	    if = {
	        limit = {
	            ROOT = {
	            	any_owned_province = { has_variable = me_ant_01_9_ter_pop_contributor }
	            }
	        }
	        ROOT = {
		        every_owned_province = {
		            limit = { has_variable = me_ant_01_9_ter_pop_contributor }
		            while = {
		                count = this.var:me_ant_01_9_ter_pop_contributor
		                ordered_pops_in_province = {
		                    limit = {
		                    	pop_culture_group = hellenic
		                        NOR = { 
		                            pop_type = slaves
		                            pop_type = nobles
		                        }
		                    }
		                    order_by = {
		                        value = 0
		                        subtract = pop_hapiness
		                    }
		                    move_pop = scope:ant_01_9_dest_scope
		                }
		            }
		        }
		    }
	    }
	}
    custom_tooltip = me_antigonid_1_vision.92.at
    ROOT = {
		if = {
	        limit = {
	            any_subject = { has_variable = me_ant_01_9_sub_pop_contributor }
	        }
	        custom_tooltip = me_antigonid_1_vision.92.tt2
	        every_subject = {
	            limit = { has_variable = me_ant_01_9_sub_pop_contributor }
	            hidden_effect = {
	                add_opinion = { modifier = ant_01_9_opmod target = ROOT }
	            }
	        }
	    }
	}
	if = {
		limit = { has_city_status = no }
		set_city_status = city
	}
    add_province_modifier = {
    	name = ant_01_9_pmod
    	duration = 7300 # 20 years
    }
    add_state_loyalty = -20
    change_province_name = "Philippeia"
}

ant_01_15_effect = {
	save_scope_as = ant_01_15_target
    custom_tooltip = me_antigonid_1_vision.151.at
    scope:me_antigonids_scope = {
	    trigger_event = {
	    	on_action = antigonid_01_vision_15_pulse_1
	    	days = 5
	    }
	}
}

ant_2_4_effect = {
	custom_tooltip = me_antigonid_2_aspiration.41.at
	show_as_tooltip = {
		current_ruler.family = { add_prestige = prestige_large }
		add_legitimacy = legitimacy_medium
		add_truce = {
			target = scope:ant_2_marriage_country_scope
			duration = 7300 # 20 years
		}
	}
	scope:ant_2_marriage_country_scope = {
		trigger_event = { id = me_antigonid_2_aspiration.42 }
	}
}

ant_2_move_bride_effect = {
	hidden_effect = {
        scope:ant_2_marriage_bride_scope = {
        	if = {
        		limit = { is_married = yes }
        		divorce_character = THIS.spouse
        	}
        	if = {
                limit = { has_variable = betrothed_flag }
                var:betrothed_flag = { remove_variable = betrothed_flag }
                remove_variable = betrothed_flag
            }
            remove_all_positions = yes
            move_country = ROOT
            set_home_country = ROOT
            set_as_minor_character = THIS
        }
    }
}

ant_2_ally_effect = {
	current_ruler.family = { add_prestige = prestige_large }
	add_legitimacy = legitimacy_medium
	hidden_effect = {
		add_opinion = { target = scope:me_antigonids_scope modifier = ant_2_marriage_opmod }
	}
	reverse_add_opinion = { target = scope:me_antigonids_scope modifier = ant_2_marriage_opmod }
	add_truce = {
		target = scope:me_antigonids_scope
		duration = 7300 # 20 years
	}
	scope:me_antigonids_scope = {
		add_truce = {
			target = ROOT
			duration = 7300 # 20 years
		}
	}
	scope:me_antigonids_scope = {
		trigger_event = {
			id = me_antigonid_2_aspiration.43
			days = 10
		}
	}
}

ant_fortress_effect = {
	if = {
		limit = {
		    num_of_fortress_building < 2
		    trigger_if = {
		    	limit = { 
		    		owner = { is_ai = no }
		    	}
		    	has_city_status = yes
		    }
		    has_owner = yes
	    	OR = {
	    		owner = ROOT
	    		owner = { is_subject_of = ROOT }
	    	}
		}
		hidden_effect = {
			save_scope_as = ant_fortress_scope
			if = {
				limit = {
					has_city_status = no
					owner = { can_pay_price = price_found_city }
				}
				owner = { pay_price = price_found_city }
				set_city_status = city
			}
		    while = {
		        limit = { num_of_fortress_building < 2 }
		        if = {
		            limit = { free_building_slots < 1 }
		            destroy_building_effect = yes
		        }
		        add_building_level = fortress_building
		    }
		}
		custom_tooltip = antigonid_01_vision_4_fort_tt
	}
}

ant_add_single_fortress_market_effect = {
	if = {
		limit = { free_building_slots >= 1 }
		add_building_level = fortress_building
	}
	if = {
		limit = { free_building_slots >= 1 }
		add_building_level = commerce_building
	}
}

ant_add_single_fortress_shipyard_effect = {
	if = {
		limit = { free_building_slots >= 1 }
		add_building_level = fortress_building
	}
	if = {
		limit = { free_building_slots >= 1 }
		add_building_level = port_building
	}
}

tre_pont_portraits_effect = {
    ordered_in_list = {
        list = tre_7_list
        order_by = country_population
        position = 0
        save_scope_as = colonies_1
    }
    ordered_in_list = {
        list = tre_7_list
        order_by = country_population
        position = 1
        save_scope_as = colonies_2
    }
    ordered_in_list = {
        list = tre_7_list
        order_by = country_population
        position = 2
        save_scope_as = colonies_3
    }
}

mac_3_1_effect = {
	remove_variable = me_mac_3_1_port_flag
	set_variable = {
        name = me_mac_3_1_port_flag
        value = scope:me_mac_3_1_port_scope
    }
    show_as_tooltip = {
        custom_tooltip = me_macedon_3_adriatic.11.at
        scope:me_mac_3_1_port_scope = {
            add_province_modifier = {
                name = me_mac_3_1_pmod
                duration = 9125 # 25 years
            }
        }
    }
}

mac_3_country_remove_effect = {
	if = {
		limit = { has_variable = mac_3_country_1 }
		remove_variable = mac_3_country_1
	}
	if = {
		limit = { has_variable = mac_3_country_2 }
		remove_variable = mac_3_country_2
	}
	if = {
		limit = { has_variable = mac_3_country_3 }
		remove_variable = mac_3_country_3
	}
	if = {
		limit = { has_variable = mac_3_country_4 }
		remove_variable = mac_3_country_4
	}
	if = {
		limit = { has_variable = mac_3_country_5 }
		remove_variable = mac_3_country_5
	}
	if = {
		limit = { has_variable = mac_3_country_6 }
		remove_variable = mac_3_country_6
	}
}

mac_3_10_effect = {
	scope:me_mac_3_10_scope = {
        trigger_event = {
            id = me_macedon_3_adriatic.102
            days = 10
        }
    }
    custom_tooltip = me_macedon_3_adriatic.101.at
    mac_3_country_remove_effect = yes
    if = {
	    limit = { has_variable = me_mac_3_10_first_flag }
	    remove_variable = me_mac_3_10_first_flag
	}
	if = {
        limit = { has_variable = mac_3_10_alt_flag }
        remove_variable = mac_3_10_alt_flag
    }
}

mac_3_9_effect = {
	scope:me_mac_3_9_scope = {
        trigger_event = {
            id = me_macedon_3_adriatic.92
            days = 10
        }
    }
    custom_tooltip = me_macedon_3_adriatic.91.at
    mac_3_country_remove_effect = yes
    if = {
	    limit = { has_variable = me_mac_3_9_first_flag }
	    remove_variable = me_mac_3_9_first_flag
	}
	if = {
        limit = { has_variable = mac_3_9_alt_flag }
        remove_variable = mac_3_9_alt_flag
    }
}

mac_3_6_effect = {
	custom_tooltip = me_macedon_3_adriatic.61.at
    show_as_tooltip = {
        scope:mac_3_prov_scope = {
            add_province_modifier = {
                name = me_mac_3_6_pmod
                duration = 7300 # 20 years
            }
            if = {
                limit = { has_city_status = no }
                set_city_status = city
            }
            if = {
            	limit = { is_state_capital = no }
            	state = { set_state_capital = PREV }
            }
            add_building_level = fortress_building
        }
    }
}

ai_build_city_pay_price_effect = {
	if = {
        limit = {
            is_ai = yes
            trigger_if = {
            	limit = { treasury > 50 }
            	can_pay_price = price_found_city
            }
            $CITY$ = { has_city_status = no }
        }
        pay_price = price_found_city
        $CITY$ = { set_city_status = city }
    }
}

egy_ai_port_fort_effect = {
	if ={
        limit = { has_city_status = no }
        set_city_status = city
    }
    while = {
        limit = {
            OR = {
                num_of_fortress_building < 1
                num_of_port_building < 1
            }
        }
        if = {
            limit = { free_building_slots < 1 }
            destroy_building_effect = yes
        }
        random_list = {
            2 = { add_building_level = fortress_building }
            2 = { add_building_level = port_building }
        }
    }
}