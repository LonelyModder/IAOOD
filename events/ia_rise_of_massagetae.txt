namespace = rise_of_massagetae

rise_of_massagetae.1 = { # Invasion of todays Azerbeijan
	type = country_event
	title = "rise_of_massagetae.1.t"
	desc = "rise_of_massagetae.1.desc"
	picture = steppe_cavalry
	
	trigger = {
		NOT = { has_global_variable = massagetae_invasion_occurred }
		#TODO condition
	}
	
	immediate = {
		set_global_variable = {
			name = massagetae_invasion_occurred
		}
		p:1621 = {
            while = {
                count = 30
                define_pop = {
                type = tribesmen
                culture = massagetic
                religion = scythic_pantheon
                }
            }                
        }
		p:7248 = { #Gomora
			create_country = {
				change_government = despotic_monarchy
				set_primary_culture = massagetic
				set_country_religion = scythic_pantheon
				change_country_name = "massagetae_NAME"
				change_country_adjective = "massagetae_ADJECTIVE"
			}
		}
		p:7247.owner = {
			declare_war_with_wargoal = {
				war_goal = conquer_wargoal
				province = p:7248
				target = p:7248.owner
			}
		}
		p:7248.owner = {
			capital_scope.governorship = {
				raise_legion = {
					create_unit = {
						location = 7248
						add_subunit = chariot_light
						add_subunit = chariot_light
						add_subunit = chariot_light
						add_subunit = chariot_light
						add_subunit = chariot_light
						add_subunit = chariot_light
						add_subunit = chariot_light
						add_subunit = cavalry_horse_archers
						add_subunit = cavalry_horse_archers
						add_subunit = cavalry_horse_archers
						add_subunit = cavalry_horse_archers
						add_subunit = missile_archers
						add_subunit = missile_archers
						add_subunit = missile_archers
						add_subunit = missile_archers
						add_subunit = missile_archers
						add_subunit = missile_archers
						add_subunit = missile_archers
						add_subunit = cavalry_horse_archers
						add_subunit = cavalry_horse_archers
						add_subunit = cavalry_horse_archers
						add_subunit = cavalry_horse_archers
					}
				}
			}
			add_country_modifier = {
				name = rise_of_massagetae_modifier
				#duration = 7300 # 20 years
			}
			every_unit = {
				add_food = 100
			}
			add_treasury = 150
		}
	}
	
	option = {
		name = rise_of_massagetae.1.a
	}
}